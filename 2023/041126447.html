<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="算法（三）图论, charminghacker">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>算法（三）图论 | charminghacker</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="charminghacker" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">charminghacker</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">charminghacker</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/rumor-sourse" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        <!-- 
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/rumor-sourse" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
         -->
    </nav>
     <!-- <div class="weather">
        
        <div id="tp-weather-widget"></div>
        <script>
            (function (a, h, g, f, e, d, c, b) { b = function () { d = h.createElement(g); c = h.getElementsByTagName(g)[0]; d.src = e; d.charset = "utf-8"; d.async = 1; c.parentNode.insertBefore(d, c) }; a["SeniverseWeatherWidgetObject"] = f; a[f] || (a[f] = function () { (a[f].q = a[f].q || []).push(arguments) }); a[f].l = +new Date(); if (a.attachEvent) { a.attachEvent("onload", b) } else { a.addEventListener("load", b, false) } }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
            window.SeniverseWeatherWidget('show', {
                flavor: "bubble",
                location: "WW92M43YCQG0",
                geolocation: true,
                language: "zh-Hans",
                unit: "c",
                theme: "auto",
                token: "2ee46d07-e99c-4227-925e-461574e6469c",
                hover: "enabled",
                container: "tp-weather-widget"
            })
        </script>
    </div>   -->
    
</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">算法（三）图论</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%9B%BE%E8%AE%BA/">
                                <span class="chip bg-color">图论</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/" class="post-category">
                                算法基础课
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-04-11
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-05-28
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    27.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    162 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="基础课"><a href="#基础课" class="headerlink" title="基础课"></a>基础课</h1><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><p>深度优先搜索</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111635535.png"></p>
<p>模板</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int dfs(int u)
&#123;
    st[u] &#x3D; true; &#x2F;&#x2F; st[u] 表示点u已经被遍历过

    for (int i &#x3D; h[u]; i !&#x3D; -1; i &#x3D; ne[i])
    &#123;
        int j &#x3D; e[i];
        if (!st[j]) dfs(j);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/activity/content/problem/content/905/">排列数字</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;

using namespace std;

const int N &#x3D; 10;

int n;      &#x2F;&#x2F;存储层数
int path[N];  &#x2F;&#x2F;存储当前排列
bool st[N];     &#x2F;&#x2F;存储状态数组，为true说明该位置有数，为false说明该位置无数，初始化后为false

void dfs(int u)
&#123;
    if(u &#x3D;&#x3D; n) &#x2F;&#x2F;达到最底层的时候即输出当前排列
    &#123;
        for (int i&#x3D;0;i &lt; n;i ++) printf(&quot;%d &quot;,path[i]);
        puts(&quot;&quot;);
        return;
    &#125;
    
    for (int i &#x3D; 1; i &lt;&#x3D; n;i ++ )  &#x2F;&#x2F;每一次深搜都要进行一次遍历
        if (!st[i]) &#x2F;&#x2F;对于每一个为true的数，只寻找后面为false的数，如1为true,2、3为false，则队列变为12,13
        &#123;
            path[u] &#x3D; i; &#x2F;&#x2F;为当前深搜排列进行赋值
            st[i] &#x3D; true; &#x2F;&#x2F;将搜到的数置为true
            dfs(u+1); &#x2F;&#x2F;下一层进行深度搜索
            st[i] &#x3D; false; &#x2F;&#x2F;，若下一层到了底层，则回溯节点
        &#125;
&#125;
int main()
&#123;
    cin &gt;&gt; n;
    dfs(0); &#x2F;&#x2F;从第0层开始搜索
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span> <span class="token comment">// 层数</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> path<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 当前排列</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">==</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				path<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
				st<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token function">dfs</span><span class="token punctuation">(</span>u <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				st<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/845/">n-皇后问题</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;

using namespace std;
const int N &#x3D; 10, M &#x3D; 2*N;
bool col[N], dg[M], udg[M];
char path[N];
int n;
char g[N][N];

void dfs(int u)&#123;
    if(u &#x3D;&#x3D; n)&#123;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
            for(int j &#x3D; 0; j &lt;n ; j ++ )&#123;
                cout &lt;&lt; g[i][j] ;
            &#125;
            cout &lt;&lt; endl;
        &#125;
        cout &lt;&lt; endl;
        return ;
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        if(!col[i] &amp;&amp; !dg[u + i] &amp;&amp; !udg[u - i + n])&#123;
            g[u][i] &#x3D; &#39;Q&#39;;
            col[i] &#x3D; dg[u+i] &#x3D; udg[u-i+n] &#x3D; true;
            dfs(u + 1);
            col[i] &#x3D; dg[u+i] &#x3D; udg[u-i+n] &#x3D; false;
            g[u][i] &#x3D; &#39;.&#39;;
        &#125;
    &#125;
&#125;


int main()&#123;
    cin &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j  &#x3D; 0 ; j &lt; n ; j ++ )&#123;
            g[i][j] &#x3D; &#39;.&#39;;
        &#125;
    &#125;
    dfs(0);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h2><p>能走最短路径</p>
<p>只有边权都是1时，才能用BFS求最短路径</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111635185.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111635581.png"></p>
<p><strong>注意这里的方向dx[4] = {-1, 0, 1, 0}, dy[4] = {0,1,0,-1}，分别是上、右、下、左</strong></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305252318902.png" alt="image-20230525231713519"></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">queue&lt;int&gt; q;
st[1] &#x3D; true; &#x2F;&#x2F; 表示1号点已经被遍历过
q.push(1);

while (q.size())
&#123;
    int t &#x3D; q.front();
    q.pop();

    for (int i &#x3D; h[t]; i !&#x3D; -1; i &#x3D; ne[i])
    &#123;
        int j &#x3D; e[i];
        if (!st[j])
        &#123;
            st[j] &#x3D; true; &#x2F;&#x2F; 表示点j已经被遍 历过
            q.push(j);
        &#125;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/846/">https://www.acwing.com/problem/content/846/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 110;

int n,m;
int g[N][N]; &#x2F;&#x2F;存储原数据
int d[N][N]; &#x2F;&#x2F;存储路径
PII q[N*N]; &#x2F;&#x2F;模拟队列

int bfs()
&#123;
    int hh &#x3D; 0, tt &#x3D; 0; &#x2F;&#x2F;hh为队头，tt为队尾
    q[0] &#x3D; &#123;0,0&#125;;&#x2F;&#x2F;模拟队列
    memset(d, -1 , sizeof d);
    int dx[4] &#x3D; &#123;-1,0,1,0&#125; , dy[4] &#x3D; &#123;0,-1,0,1&#125;;&#x2F;&#x2F;用(-1,0),(0,1),(1,0),(0,-1)模拟点的上下移动 
    d[0][0] &#x3D; 0;
    while(hh &lt;&#x3D; tt)
    &#123;
        auto t &#x3D; q[hh++];&#x2F;&#x2F;取出队头
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )&#x2F;&#x2F;扩展队列
        &#123;
            int x &#x3D; t.first + dx[i], y &#x3D; t.second +  dy[i];
            if(x &gt;&#x3D; 0 &amp;&amp; x &lt; n &amp;&amp; y &gt;&#x3D; 0 &amp;&amp; y &lt; m &amp;&amp; g[x][y] &#x3D;&#x3D; 0 &amp;&amp; d[x][y] &#x3D;&#x3D; -1) 
            &#123;
                d[x][y] &#x3D; d[t.first][t.second] + 1;
                q[++tt] &#x3D; &#123;x,y&#125;;
            &#125;
        &#125;
    &#125;
    return d[n-1][m-1];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 0 ; i &lt; n ;  i ++ )
        for(int j &#x3D; 0 ; j &lt; m ; j ++ )
            cin &gt;&gt; g[i][j];
            
    cout &lt;&lt; bfs() &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 110;

int n,m;
int g[N][N];
int d[N][N];
queue&lt;PII&gt; q;

int bfs()
&#123;
    memset(d,-1,sizeof d);
    q.push(&#123;0,0&#125;);
    d[0][0] &#x3D; 0;
    int dx[4] &#x3D; &#123;-1,0,1,0&#125; , dy[4] &#x3D; &#123;0,-1,0,1&#125;;
    while(!q.empty())
    &#123;
        auto t &#x3D; q.front();
        q.pop();
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )
        &#123;
            int x &#x3D; t.first + dx[i] , y &#x3D; t.second + dy[i];
            if(x&gt;&#x3D;0&amp;&amp;x&lt;n&amp;&amp;y&gt;&#x3D;0&amp;&amp;y&lt;m&amp;&amp;g[x][y]&#x3D;&#x3D;0&amp;&amp;d[x][y]&#x3D;&#x3D;-1)
            &#123;
                q.push(&#123;x,y&#125;);
                d[x][y] &#x3D; d[t.first][t.second] + 1;
            &#125;
        &#125;
    &#125;
    return d[n-1][m-1];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 0 ; i &lt; n ;  i ++ )
        for(int j &#x3D; 0 ; j &lt; m ; j ++ )
            cin &gt;&gt; g[i][j];
            
    cout &lt;&lt; bfs() &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> g<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pairs</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pairs</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token class-name">Pairs</span> p <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span>first <span class="token operator">+</span> dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span>second <span class="token operator">+</span> dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> y <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					d<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>p<span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">return</span> d<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">Pairs</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> first<span class="token punctuation">;</span>
	<span class="token keyword">int</span> second<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> first<span class="token punctuation">,</span> <span class="token keyword">int</span> second<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> first<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">=</span> second<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/847/">八数码</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;queue&gt;
#include&lt;unordered_map&gt;
#include&lt;cstring&gt;

using namespace std;

int bfs(string start)&#123;
    string end &#x3D; &quot;12345678x&quot;;
    int dx[4] &#x3D; &#123;-1,0,1,0&#125;, dy[4] &#x3D; &#123;0,1,0,-1&#125;;
    queue&lt;string&gt; q;
    unordered_map&lt;string,int&gt; d;
    q.push(start);
    d[start] &#x3D; 0;
    
    while(!q.empty())&#123;
        string s &#x3D; q.front();
        q.pop();
        
        int dis &#x3D; d[s];
        if(s &#x3D;&#x3D; end) return dis;
        
        int k &#x3D; s.find(&#39;x&#39;);
        int x &#x3D; k &#x2F; 3;
        int y &#x3D; k % 3;
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )&#123;
            int a &#x3D; x + dx[i], b &#x3D; y + dy[i];
            if(a &gt;&#x3D; 0 &amp;&amp; a &lt; 3 &amp;&amp; b &gt;&#x3D; 0 &amp;&amp; b &lt; 3)&#123;
                swap(s[k], s[a * 3 + b]);
                if(!d.count(s))&#123;
                    d[s] &#x3D; dis + 1;
                    q.push(s);
                &#125;
                swap(s[k], s[a * 3 + b]);
            &#125;
        &#125;
    &#125;
    
    if(d[end] &#x3D;&#x3D; 0) return -1;
    
    return d[end];
&#125;

int main()&#123;
    string start;
    for(int i &#x3D; 0 ; i &lt; 9 ; i ++ )&#123;
        char c;
        cin &gt;&gt; c;
        start +&#x3D; c;
    &#125;
    
    cout &lt;&lt; bfs(start) &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="树与图的深度优先遍历"><a href="#树与图的深度优先遍历" class="headerlink" title="树与图的深度优先遍历"></a>树与图的深度优先遍历</h2><p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/848/">树的重心</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;
const int N &#x3D; 1e5+10, M &#x3D; 2*N;

int n;
int idx,e[M],ne[M],h[N];
bool st[N];
int ans &#x3D; N;

void add(int a,int b)&#123;
    e[idx] &#x3D; b;
    ne[idx] &#x3D; h[a];
    h[a] &#x3D; idx ++ ;
&#125;

int dfs(int u)&#123;
    st[u] &#x3D; true;
    int size &#x3D; 0, sum &#x3D; 1;
    for(int i &#x3D; h[u]; i !&#x3D; -1 ; i &#x3D; ne[i])&#123;
        int j &#x3D; e[i];
        if(!st[j]) &#123;
            int s &#x3D; dfs(j);
            size &#x3D; max(size, s); &#x2F;&#x2F;记录最大联通子图的节点数
            sum +&#x3D; s; &#x2F;&#x2F;以j为根的树的节点数
        &#125;
    &#125;
    
    size &#x3D; max(size , n - sum);
    ans &#x3D; min(size, ans);
    return sum;
&#125;

int main()&#123;
    memset(h,-1,sizeof h);
    cin &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n - 1  ; i ++ )&#123;
        int a,b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a,b);
        add(b,a);
    &#125;
    dfs(1); 
    cout &lt;&lt; ans &lt;&lt;endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">,</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token class-name">N</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token class-name">N</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		st<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>st<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
			size <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
			sum <span class="token operator">+=</span> s<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		size <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> n <span class="token operator">-</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
		res <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> sum<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="树与图的广度优先遍历"><a href="#树与图的广度优先遍历" class="headerlink" title="树与图的广度优先遍历"></a>树与图的广度优先遍历</h2><p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/849/">图中点的层次</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 1e5 +10;
int n,m;
int idx,e[N],ne[N],h[N],d[N];

void add(int a,int b)&#123;
    e[idx] &#x3D; b;
    ne[idx] &#x3D; h[a];
    h[a] &#x3D; idx ++ ;
&#125;


int bfs()&#123;
    memset(d,-1,sizeof d);
    queue&lt;int&gt; q;
    q.push(1);
    d[1] &#x3D; 0;
    
    while(!q.empty())&#123;
        int t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; h[t] ; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &#x3D;&#x3D; -1)&#123;
                d[j] &#x3D; d[t] + 1;
                q.push(j);
            &#125;
        &#125;
    &#125;
    return d[n];
&#125;

int main()&#123;
    memset(h,-1,sizeof h);
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )&#123;
        int a,b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a,b);
    &#125;
    
    cout &lt;&lt; bfs() &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> idx<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
					q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">return</span> d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="拓扑序列"><a href="#拓扑序列" class="headerlink" title="拓扑序列"></a>拓扑序列</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111635726.png"></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F; 对于每个点k，开一个单链表，存储k所有可以走到的点。h[k]存储这个单链表的头结点，e[k]存储该边的目的节点,ne[N]存储所有的边，
int h[N], e[N], ne[N], idx;

&#x2F;&#x2F; 添加一条边a-&gt;b
void add(int a, int b)
&#123;
    e[idx] &#x3D; b, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

&#x2F;&#x2F; 初始化
idx &#x3D; 0;
memset(h, -1, sizeof h);

bool topsort()
&#123;
    int hh &#x3D; 0, tt &#x3D; -1;

    &#x2F;&#x2F; d[i] 存储点i的入度，即存储所有入度为0的点
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
        if (!d[i])
            q[ ++ tt] &#x3D; i;

    while (hh &lt;&#x3D; tt)
    &#123;
        int t &#x3D; q[hh ++ ];

        for (int i &#x3D; h[t]; i !&#x3D; -1; i &#x3D; ne[i]) &#x2F;&#x2F;遍历该点的所有边
        &#123;
            int j &#x3D; e[i];
            if (-- d[j] &#x3D;&#x3D; 0)
                q[ ++ tt] &#x3D; j;
            &#x2F;&#x2F;遍历每个目的节点，若度数减1后为0，则将该点插入到拓扑队列中
        &#125;
    &#125;

    &#x2F;&#x2F; 如果所有点都入队了，说明存在拓扑序列；否则不存在拓扑序列。
    return tt &#x3D;&#x3D; n - 1;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> idx<span class="token punctuation">,</span> cnt<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ans<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
	ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
	h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">topsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>  i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ans<span class="token punctuation">[</span>cnt<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">--</span> <span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	
	<span class="token keyword">return</span> cnt <span class="token operator">==</span> n<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/850/">有向图的拓扑序列</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;

using namespace std;

const int N &#x3D; 100010;

int idx,h[N],e[N],ne[N];
int n,m;
int q[N],d[N];

void add(int a,int b)
&#123;
    e[idx] &#x3D; b , ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

bool topsort()
&#123;
    int tt &#x3D; -1 , hh &#x3D; 0 ;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )
        if(!d[i]) q[++tt] &#x3D; i; 
    while(hh&lt;&#x3D;tt)
    &#123;
        int t &#x3D; q[hh++];
        for(int i &#x3D; h[t] ; i !&#x3D; -1 ; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            d[j] -- ;
            if(!d[j]) q[++tt] &#x3D; j;
        &#125;
    &#125;
    return tt &#x3D;&#x3D; n - 1;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    memset(h,-1,sizeof h);
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a,b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a,b);
        d[b]++;
    &#125;
    if(topsort())
    &#123;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ ) printf(&quot;%d &quot;,q[i]);
        puts(&quot;&quot;);
    &#125;
    else puts(&quot;-1&quot;);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> cnt<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ans<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">topsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>  i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ans<span class="token punctuation">[</span>cnt<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">--</span> <span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		
		<span class="token keyword">return</span> cnt <span class="token operator">==</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			d<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">++</span> <span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">topsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cnt <span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span> out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><h3 id="朴素Dijkstra"><a href="#朴素Dijkstra" class="headerlink" title="朴素Dijkstra"></a>朴素Dijkstra</h3><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111636456.png"></p>
<p>稀疏图：邻接矩阵 稠密图：邻接表</p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int g[N][N];  &#x2F;&#x2F; 存储每条边
int dist[N];  &#x2F;&#x2F; 存储1号点到每个点的最短距离
bool st[N];   &#x2F;&#x2F; 存储每个点的最短路是否已经确定

&#x2F;&#x2F; 求1号点到n号点的最短路，如果不存在则返回-1
int dijkstra()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[1] &#x3D; 0;

    for (int i &#x3D; 0; i &lt; n - 1; i ++ )
    &#123;
        int t &#x3D; -1;     &#x2F;&#x2F; 在还未确定最短路的点中，寻找距离最小的点
        for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
            if (!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || dist[t] &gt; dist[j]))
                t &#x3D; j;

        &#x2F;&#x2F; 用t更新其他点的距离
        for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
            dist[j] &#x3D; min(dist[j], dist[t] + g[t][j]);

        st[t] &#x3D; true;
    &#125;

    if (dist[n] &#x3D;&#x3D; 0x3f3f3f3f) return -1;
    return dist[n];
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/851/">https://www.acwing.com/problem/content/851/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;

using namespace std;

const int N &#x3D; 510;

int n ,m ;
int g[N][N];
bool st[N];
int d[N];

int dijstra()
&#123;
    memset(d, 0x3f, sizeof d);
    d[1] &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
    &#123;
        int t &#x3D; -1;
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            if(!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || d[t] &gt; d[j]))
                t &#x3D; j ;
        &#125;
        
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            d[j] &#x3D; min(d[j], d[t] + g[t][j]);
        &#125;
        
        st[t] &#x3D; true;
    &#125;
    
    if(d[n] &#x3D;&#x3D; 0x3f3f3f3f) return -1;
    return d[n];
&#125;

int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m) ;
    memset(g,0x3f,sizeof g);
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )&#123;
        int x, y, z;
        scanf(&quot;%d%d%d&quot;,&amp;x,&amp;y,&amp;z);
        g[x][y] &#x3D; min(g[x][y], z);
    &#125;
    
    int t &#x3D; dijstra();
    
    printf(&quot;%d&quot;,t);
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="堆优化Dijkstra"><a href="#堆优化Dijkstra" class="headerlink" title="堆优化Dijkstra"></a>堆优化Dijkstra</h3><p>模板</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef pair&lt;int, int&gt; PII;

int n;      &#x2F;&#x2F; 点的数量
int h[N], w[N], e[N], ne[N], idx;       &#x2F;&#x2F; 邻接表存储所有边
int dist[N];        &#x2F;&#x2F; 存储所有点到1号点的距离
bool st[N];     &#x2F;&#x2F; 存储每个点的最短距离是否已确定

&#x2F;&#x2F; 求1号点到n号点的最短距离，如果不存在，则返回-1
int dijkstra()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[1] &#x3D; 0;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0, 1&#125;);      &#x2F;&#x2F; first存储距离，second存储节点编号

    while (heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();

        int ver &#x3D; t.second, distance &#x3D; t.first;

        if (st[ver]) continue;
        st[ver] &#x3D; true;

        for (int i &#x3D; h[ver]; i !&#x3D; -1; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if (dist[j] &gt; distance + w[i])
            &#123;
                dist[j] &#x3D; distance + w[i];
                heap.push(&#123;dist[j], j&#125;);
            &#125;
        &#125;
    &#125;

    if (dist[n] &#x3D;&#x3D; 0x3f3f3f3f) return -1;
    return dist[n];
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;queue&gt;

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 150010;

int n,m;
int idx,h[N],e[N],ne[N],w[N];
int d[N];
bool st[N]; 

void add(int a,int b,int c)
&#123;
    e[idx] &#x3D; b , w[idx] &#x3D; c , ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;      
&#125;

int dijstra()
&#123;
    memset(d, 0x3f , sizeof d);
    d[1] &#x3D; 0;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap; &#x2F;&#x2F;小根堆，按first从小到大
    heap.push(&#123;0,1&#125;);
    
    while(heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second,distance &#x3D; t.first; &#x2F;&#x2F;first是距离，second是枚举的点
        
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1 ; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if(d[j] &gt; distance + w[i])
            &#123;
                d[j] &#x3D; distance + w[i];
                heap.push(&#123;d[j],j&#125;);
            &#125;
        &#125;
    &#125;
    
    if(d[n] &#x3D;&#x3D; 0x3f3f3f3f) return -1;
    return d[n];
&#125;

int main()
&#123;
    memset(h, -1 ,sizeof h);
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    while(m--)
    &#123;
        int a,b,c;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);
        add(a,b,c);
    &#125;
    
    int t &#x3D; dijstra();
    
    printf(&quot;%d&quot;,t);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">150010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> idx<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> w<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		w<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">dijsktra</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pairs</span><span class="token punctuation">></span></span> pq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pairs</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		pq<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>pq<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token class-name">Pairs</span> t <span class="token operator">=</span> pq<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			pq<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">int</span> ver <span class="token operator">=</span> t<span class="token punctuation">.</span>second<span class="token punctuation">,</span> distance <span class="token operator">=</span> t<span class="token punctuation">.</span>first<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>st<span class="token punctuation">[</span>ver<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			st<span class="token punctuation">[</span>ver<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>ver<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> distance <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> distance <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					pq<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			c <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token function">dijsktra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">Pairs</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pairs</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> first<span class="token punctuation">;</span> <span class="token comment">// 距离</span>
	<span class="token keyword">int</span> second<span class="token punctuation">;</span> <span class="token comment">// 枚举的点</span>

	<span class="token keyword">public</span> <span class="token class-name">Pairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> first<span class="token punctuation">,</span> <span class="token keyword">int</span> second<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> first<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">=</span> second<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Pairs</span> p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">!=</span> p<span class="token punctuation">.</span>first<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">-</span> p<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">-</span> p<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304022052890.png"></p>
<h2 id="bellman-ford"><a href="#bellman-ford" class="headerlink" title="bellman-ford"></a>bellman-ford</h2><p>不能存在负权回路</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111636275.png"></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n, m;       &#x2F;&#x2F; n表示点数，m表示边数
int dist[N];        &#x2F;&#x2F; dist[x]存储1到x的最短路距离

struct Edge     &#x2F;&#x2F; 边，a表示出点，b表示入点，w表示边的权重
&#123;
    int a, b, w;
&#125;edges[M];

&#x2F;&#x2F; 求1到n的最短路距离，如果无法从1走到n，则返回-1。
int bellman_ford()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[1] &#x3D; 0;

    &#x2F;&#x2F; 如果第n次迭代仍然会松弛三角不等式，就说明存在一条长度是n+1的最短路径，由抽屉原理，路径中至少存在两个相同的点，说明图中存在负权回路。
    for (int i &#x3D; 0; i &lt; n; i ++ )
    &#123;
        for (int j &#x3D; 0; j &lt; m; j ++ )
        &#123;
            int a &#x3D; edges[j].a, b &#x3D; edges[j].b, w &#x3D; edges[j].w;
            if (dist[b] &gt; dist[a] + w)
                dist[b] &#x3D; dist[a] + w;
        &#125;
    &#125;

    if (dist[n] &gt; 0x3f3f3f3f &#x2F; 2) return -1;
    return dist[n];
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/855/">有边数限制的最短路</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;

using namespace std;
const int M &#x3D; 10010,N &#x3D; 510;
int n,m,k;
struct Edge&#123;
    int a,b,w;
&#125;edges[M];
int d[N],backup[N];
&#x2F;&#x2F;backup存在的意义是进行备份，防止dist数组出现串联更新的结果，简单来说就是在一次迭代时，前面的dist值发生变化，则后面的dist值会使用前面变化后的值，因此我们在每次迭代后都需要进行备份，从而使dist改变时是与备份的值相比较
bool flag; &#x2F;&#x2F;判断答案是否正好为-1
int bellman_ford()
&#123;
    memset(d,0x3f,sizeof d);
    
    d[1] &#x3D; 0;
    
    for(int i &#x3D; 0 ; i &lt; k ; i ++ )
    &#123;
        memcpy(backup, d, sizeof d);
        for(int j &#x3D; 0 ; j &lt; m ; j ++ )
        &#123;
            int a &#x3D; edges[j].a, b &#x3D; edges[j].b , w &#x3D; edges[j].w;
            d[b] &#x3D; min(d[b],backup[a]+w);
        &#125;
    &#125;
    
    if(d[n] &gt; 0x3f3f3f3f &#x2F; 2) 
    &#123;
        flag &#x3D; true;
        return -1;
    &#125;
    return d[n];
&#125;

int main()
&#123;
    scanf(&quot;%d%d%d&quot;,&amp;n,&amp;m,&amp;k);
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a,b,w;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;w);
        edges[i] &#x3D; &#123;a,b,w&#125;;
    &#125;
    
    int t &#x3D; bellman_ford();
    
    if(flag &amp;&amp; t &#x3D;&#x3D; -1) puts(&quot;impossible&quot;); 
    else printf(&quot;%d&quot;,t);
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">510</span><span class="token punctuation">,</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">10010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> k<span class="token punctuation">;</span><span class="token comment">// n表示点数，m表示边数</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// d[x]存储1到x的最短路距离</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> backup<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Edge</span> edges<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>
	<span class="token comment">// 求1到n的最短路距离，如果无法从1走到n，则返回-1。</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">bellman_ford</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			backup <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> d<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> a <span class="token operator">=</span> edges<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> edges<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>b<span class="token punctuation">,</span> w <span class="token operator">=</span> edges<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">;</span>
				d<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> backup<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0x3f3f3f3f</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">return</span> d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		k <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			w <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			edges<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token function">bellman_ford</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">&amp;&amp;</span> t <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"impossible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">Edge</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> w<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="spfa"><a href="#spfa" class="headerlink" title="spfa"></a>spfa</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111636994.png"></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n;      &#x2F;&#x2F; 总点数
int h[N], w[N], e[N], ne[N], idx;       &#x2F;&#x2F; 邻接表存储所有边
int dist[N];        &#x2F;&#x2F; 存储每个点到1号点的最短距离
bool st[N];     &#x2F;&#x2F; 存储每个点是否在队列中

&#x2F;&#x2F; 求1号点到n号点的最短路距离，如果从1号点无法走到n号点则返回-1
int spfa()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[1] &#x3D; 0;

    queue&lt;int&gt; q;
    q.push(1);
    st[1] &#x3D; true;

    while (q.size())
    &#123;
        auto t &#x3D; q.front();
        q.pop();

        st[t] &#x3D; false;

        for (int i &#x3D; h[t]; i !&#x3D; -1; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if (dist[j] &gt; dist[t] + w[i])
            &#123;
                dist[j] &#x3D; dist[t] + w[i];
                if (!st[j])     &#x2F;&#x2F; 如果队列中已存在j，则不需要将j重复插入
                &#123;
                    q.push(j);
                    st[j] &#x3D; true;
                &#125;
            &#125;
        &#125;
    &#125;

    if (dist[n] &#x3D;&#x3D; 0x3f3f3f3f) return -1;
    return dist[n];
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/853/">spfa求最短路</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 100010;
int n,m;
int h[N], w[N], e[N], ne[N], idx;
int d[N];
bool st[N],flag; &#x2F;&#x2F;st数组存储的是该点是否在队列当中

void add(int a,int b,int c)
&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c , ne[idx] &#x3D; h[a] , h[a] &#x3D; idx ++;
&#125;

int spfa()
&#123;
    memset(d, 0x3f, sizeof d);
    d[1] &#x3D; 0;
    
    queue&lt;int&gt; q;
    q.push(1);
    st[1] &#x3D; true; 
    while(q.size())
    &#123;
        int t &#x3D; q.front();
        q.pop();
        
        st[t] &#x3D; false;
        
        for(int i &#x3D; h[t] ; i !&#x3D; -1 ; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if(d[j] &gt; d[t] + w[i])
            &#123;
                d[j] &#x3D; d[t] + w[i];
                if(!st[j])
                &#123;
                    q.push(j);
                    st[j] &#x3D; true;
                &#125;
            &#125;
        &#125;
    &#125;
    
    if(d[n] &gt; 0x3f3f3f3f&#x2F;2)&#123;
        flag &#x3D; true;
        return -1;
    &#125; 
    return d[n];
&#125;
int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    memset(h,-1,sizeof h);
    while(m--)
    &#123;
        int a,b,c;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);
        add(a,b,c);
    &#125;
    
    int t &#x3D; spfa();
    
    if(flag &amp;&amp; t &#x3D;&#x3D; -1) puts(&quot;impossible&quot;);
    else printf(&quot;%d&quot;,t);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> idx<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> w<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		w<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		st<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			st<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
						q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
						st<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">&#125;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0x3f3f3f3f</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">return</span> d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			c <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">&amp;&amp;</span> t <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"impossible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/854/">spfa判断负环 </a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 100010;
int n,m;
int h[N], w[N], e[N], ne[N], idx;
int d[N],cnt[N];
bool st[N],flag;

void add(int a,int b,int c)
&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c , ne[idx] &#x3D; h[a] , h[a] &#x3D; idx ++;
&#125;

int spfa()
&#123;
    &#x2F;&#x2F;因为负环的存在，所以即使每个点距离虚拟原点距离为0，负权边的存在依然可以更新某个点为更小的负值
    queue&lt;int&gt; q;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ;  i++ )
    &#123;
        st[i] &#x3D; true;
        q.push(i);
    &#125;
    while(q.size())
    &#123;
        int t &#x3D; q.front();
        q.pop();
        
        st[t] &#x3D; false;
        
        for(int i &#x3D; h[t] ; i !&#x3D; -1 ; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if(d[j] &gt; d[t] + w[i])
            &#123;
                d[j] &#x3D; d[t] + w[i];
                cnt[j] &#x3D; cnt[t] + 1;
                
                if(cnt[j] &gt;&#x3D; n) return  true;
                if(!st[j])
                &#123;
                    q.push(j);
                    st[j] &#x3D; true;
                &#125;
            &#125;
        &#125;
    &#125;
    return false;
&#125;
int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    memset(h,-1,sizeof h);
    while(m--)
    &#123;
        int a,b,c;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);
        add(a,b,c);
    &#125;
    
    if(spfa()) puts(&quot;Yes&quot;);
    else puts(&quot;No&quot;);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">100010</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> idx<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> h<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> w<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> e<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ne<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> cnt<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
		w<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
		ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
		h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			st<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			q<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			st<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">int</span> j <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					cnt<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">>=</span> n<span class="token punctuation">)</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
						q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
						st<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">&#125;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			c <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Yes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"No"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">初始化：
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
        for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
            if (i &#x3D;&#x3D; j) d[i][j] &#x3D; 0;
            else d[i][j] &#x3D; INF;

&#x2F;&#x2F; 算法结束后，d[a][b]表示a到b的最短距离
void floyd()
&#123;
    for (int k &#x3D; 1; k &lt;&#x3D; n; k ++ )
        for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
            for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
                d[i][j] &#x3D; min(d[i][j], d[i][k] + d[k][j]);
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/856/">https://www.acwing.com/problem/content/856/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 210, INF &#x3D; 1e9;

int n,m,Q;
int d[N][N];

void floyd()
&#123;
    for(int k &#x3D; 1 ;k &lt;&#x3D; n ; k ++ )
    &#123;
        for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )
        &#123;
            for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
            &#123;
                d[i][j] &#x3D; min(d[i][j], d[i][k] + d[k][j]);
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    scanf(&quot;%d%d%d&quot;,&amp;n,&amp;m,&amp;Q);
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )
    &#123;
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            if(i &#x3D;&#x3D; j) d[i][i] &#x3D; 0;
            else d[i][j] &#x3D; INF;
        &#125;
    &#125;
    
    while(m--)
    &#123;
        int a,b,w;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;w);
        d[a][b] &#x3D; min(d[a][b],w);
    &#125;
    
    floyd();
    
    while(Q--)
    &#123;
        int a,b;
        scanf(&quot;%d%d&quot;,&amp;a,&amp;b);
        if(d[a][b] &gt; INF&#x2F;2) puts(&quot;impossible&quot;);
        else printf(&quot;%d\n&quot;,d[a][b]);
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">210</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> <span class="token class-name">Q</span><span class="token punctuation">,</span> idx<span class="token punctuation">,</span> INF <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token number">1e9</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Q</span> <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> j<span class="token punctuation">)</span>
					d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">else</span>
					d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token operator">--</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			w <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token function">floyd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">Q</span><span class="token operator">--</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">></span> INF <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
				out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"impossible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>

		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111636232.png"></p>
<p>适用于<strong>稠密图</strong></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n;      &#x2F;&#x2F; n表示点数
int g[N][N];        &#x2F;&#x2F; 邻接矩阵，存储所有边
int dist[N];        &#x2F;&#x2F; 存储其他点到当前最小生成树的距离
bool st[N];     &#x2F;&#x2F; 存储每个点是否已经在生成树中


&#x2F;&#x2F; 如果图不连通，则返回INF(值是0x3f3f3f3f), 否则返回最小生成树的树边权重之和
int prim()
&#123;
    memset(dist, 0x3f, sizeof dist);

    int res &#x3D; 0;
    for (int i &#x3D; 0; i &lt; n; i ++ )
    &#123;
        int t &#x3D; -1;
        for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
            if (!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || dist[t] &gt; dist[j]))
                t &#x3D; j;

        if (i &amp;&amp; dist[t] &#x3D;&#x3D; INF) return INF;

        if (i) res +&#x3D; dist[t];
        st[t] &#x3D; true;

        for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ ) dist[j] &#x3D; min(dist[j], g[t][j]);
    &#125;

    return res;
&#125;
 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/860/">Prim算法求最小生成树</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;cstring&gt;
#include&lt;iostream&gt;

using namespace std;

const int N &#x3D; 510 , INF &#x3D; 0x3f3f3f3f;

int g[N][N];
int n,m;
bool st[N];
int d[N];

int prim()
&#123;
    memset(d, 0x3f, sizeof d);
    int res &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
    &#123;
        int t &#x3D; -1;
        for(int  j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            if(!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || d[t] &gt; d[j]))
                t &#x3D; j;
        &#125;
        
        if(i &amp;&amp; d[t] &#x3D;&#x3D; INF) return INF;
        if(i) res +&#x3D; d[t];
        
        for(int j &#x3D; 1; j &lt;&#x3D; n ; j ++ ) d[j] &#x3D; min(d[j],g[t][j]);
        st[t] &#x3D; true;
    &#125;
    return res;
&#125;

int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    memset(g,0x3f,sizeof g);
    
    while(m--)
    &#123;
        int a,b,c;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);
        g[a][b] &#x3D; g[b][a] &#x3D; min(g[a][b],c);
    &#125;
    
    int t &#x3D; prim();
    
    if(t &#x3D;&#x3D; INF) puts(&quot;impossible&quot;);
    else printf(&quot;%d&quot;,t);
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">510</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> g<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 邻接矩阵，存储所有边</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 存储其他点到当前最小生成树的距离</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> st<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 存储每个点是否已经在生成树中</span>

    <span class="token comment">// 如果图不连通，则返回INF(值是0x3f3f3f3f), 否则返回最小生成树的树边权重之和</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">Prim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					t <span class="token operator">=</span> j<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span>
				<span class="token keyword">return</span> INF<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
				res <span class="token operator">+=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
				d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			st<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">return</span> res<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span> 
		<span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token operator">--</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			c <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			g<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token class-name">Prim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> INF<span class="token punctuation">)</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"impossible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111637177.png"></p>
<p>适用于<strong>稀疏图</strong></p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n, m;       &#x2F;&#x2F; n是点数，m是边数
int p[N];       &#x2F;&#x2F; 并查集的父节点数组

struct Edge     &#x2F;&#x2F; 存储边
&#123;
    int a, b, w;

    bool operator&lt; (const Edge &amp;W)const
    &#123;
        return w &lt; W.w;
    &#125;
&#125;edges[M];

int find(int x)     &#x2F;&#x2F; 并查集核心操作
&#123;
    if (p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int kruskal()
&#123;
    sort(edges, edges + m);

    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ ) p[i] &#x3D; i;    &#x2F;&#x2F; 初始化并查集

    int res &#x3D; 0, cnt &#x3D; 0;
    for (int i &#x3D; 0; i &lt; m; i ++ )
    &#123;
        int a &#x3D; edges[i].a, b &#x3D; edges[i].b, w &#x3D; edges[i].w;

        a &#x3D; find(a), b &#x3D; find(b);
        if (a !&#x3D; b)     &#x2F;&#x2F; 如果两个连通块不连通，则将这两个连通块合并
        &#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
            cnt ++ ;
        &#125;
    &#125;

    if (cnt &lt; n - 1) return INF;
    return res;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/861/">https://www.acwing.com/problem/content/861/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N &#x3D; 200010;

int n,m;
int p[N];

struct Edge&#123;
    int a,b,w;
    bool operator&lt; (const Edge &amp;W) const &#123;
        return w &lt; W.w;
    &#125;
&#125;edges[N];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a,b,w;
        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;w);
        edges[i] &#x3D; &#123;a,b,w&#125;;
    &#125;
    
    sort(edges,edges+m);
    
    for(int i &#x3D; 1; i &lt;&#x3D; n ; i ++ ) p[i] &#x3D; i;
    
    int res &#x3D; 0 , cnt &#x3D; 0;
    for(int i &#x3D; 0; i &lt; m ; i ++ )
    &#123;
        int a&#x3D;edges[i].a,b&#x3D;edges[i].b,w&#x3D;edges[i].w;
        a&#x3D;find(a),b&#x3D;find(b);
        if(a !&#x3D; b) 
        &#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
            cnt ++ ;
        &#125;
    &#125;
    
    if(cnt &lt; n - 1) puts(&quot;impossible&quot;);
    else printf(&quot;%d&quot;,res);
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">StreamTokenizer</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StreamTokenizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		in<span class="token punctuation">.</span><span class="token function">nextToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> in<span class="token punctuation">.</span>nval<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">200010</span><span class="token punctuation">,</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> p<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Edge</span> edges<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> x<span class="token punctuation">)</span>
			p<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> p<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">Kruskal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>edges<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>

		<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a <span class="token operator">=</span> edges<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> edges<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>b<span class="token punctuation">,</span> w <span class="token operator">=</span> edges<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">!=</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				p<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
				res <span class="token operator">+=</span> w<span class="token punctuation">;</span>
				cnt<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> INF<span class="token punctuation">;</span>
		<span class="token keyword">return</span> res<span class="token punctuation">;</span>

	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
		n <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">;</span>
			a <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			b <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			w <span class="token operator">=</span> <span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			edges<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token class-name">Kruskal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> INF<span class="token punctuation">)</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"impossible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">Edge</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Edge</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> w<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> w<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Edge</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">-</span> o<span class="token punctuation">.</span>w<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="染色法判定二分图"><a href="#染色法判定二分图" class="headerlink" title="染色法判定二分图"></a>染色法判定二分图</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304111637009.png"></p>
<p>一个图是二分图，当且仅当图中不含奇数环</p>
<p>模板：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n;      &#x2F;&#x2F; n表示点数
int h[N], e[M], ne[M], idx;     &#x2F;&#x2F; 邻接表存储图
int color[N];       &#x2F;&#x2F; 表示每个点的颜色，-1表示未染色，0表示白色，1表示黑色

&#x2F;&#x2F; 参数：u表示当前节点，c表示当前点的颜色
bool dfs(int u, int c)
&#123;
    color[u] &#x3D; c;
    for (int i &#x3D; h[u]; i !&#x3D; -1; i &#x3D; ne[i])
    &#123;
        int j &#x3D; e[i];
        if (color[j] &#x3D;&#x3D; -1)
        &#123;
            if (!dfs(j, !c)) return false;
        &#125;
        else if (color[j] &#x3D;&#x3D; c) return false;
    &#125;

    return true;
&#125;

bool check()
&#123;
    memset(color, -1, sizeof color);
    bool flag &#x3D; true;
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
        if (color[i] &#x3D;&#x3D; -1)
            if (!dfs(i, 0))
            &#123;
                flag &#x3D; false;
                break;
            &#125;
    return flag;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原题链接：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/862/">https://www.acwing.com/problem/content/862/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 100010, M &#x3D; 200010;
int idx,e[M],ne[M],h[N],color[N];
int n,m;

void add(int a,int b)
&#123;
    e[idx] &#x3D; b , ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

bool dfs(int u,int c)&#x2F;&#x2F;u是点，c是颜色
&#123;
    color[u] &#x3D; c;
    for(int i &#x3D; h[u];i!&#x3D;-1;i&#x3D;ne[i])
    &#123;
        int j &#x3D; e[i];
        if(!color[j])
        &#123;
            if(!dfs(j,3-c)) return false; &#x2F;&#x2F; 因为颜色从1变成2，从2变成1，所以是3-c
        &#125;
        else if(color[j] &#x3D;&#x3D; c) return false;
    &#125;
    return true;
&#125;

int main()
&#123;
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    memset(h,-1,sizeof h);
    while(m--)
    &#123;
        int a,b;
        scanf(&quot;%d%d&quot;,&amp;a,&amp;b);
        add(a,b), add(b,a);
    &#125;
    
    bool flag &#x3D; true;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )
    &#123;
        if(!color[i])
        &#123;
            if(!dfs(i,1))
            &#123;
                flag &#x3D; false;
                break;
            &#125;
        &#125;
    &#125;
    if(flag) puts(&quot;Yes&quot;);
    else puts(&quot;No&quot;);
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="匈牙利算法"><a href="#匈牙利算法" class="headerlink" title="匈牙利算法"></a>匈牙利算法</h2><p>原题链接： <a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/863/">https://www.acwing.com/problem/content/863/</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 510, M &#x3D; 100010;

int idx,h[N],e[M],ne[M];
int n1,n2,m;
bool st[N];
int match[N];

void add(int a,int b)
&#123;
    e[idx] &#x3D; b, ne[idx] &#x3D; h[a], h[a] &#x3D; idx++;
&#125;
bool find(int x)
&#123;
    for(int i &#x3D; h[x] ; i !&#x3D; -1 ; i &#x3D; ne[i])
    &#123;
        int j &#x3D; e[i];
        if(!st[j])
        &#123;
            st[j] &#x3D; true;
            if(match[j] &#x3D;&#x3D; 0 || find(match[j]))
            &#123;
                match[j] &#x3D; x;
                return true;
            &#125;
        &#125;
    &#125;
    return false;
&#125;

int main()
&#123;
    scanf(&quot;%d%d%d&quot;,&amp;n1,&amp;n2,&amp;m);
    memset(h,-1,sizeof h);
    
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int u,v;
        scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
        add(u,v);
    &#125;
    
    int res &#x3D; 0 ;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n1 ; i ++ )
    &#123;
        memset(st,false,sizeof st);
        if(find(i)) res ++ ;
    &#125;
    
    printf(&quot;%d&quot;,res);
    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="提高课（搜索）"><a href="#提高课（搜索）" class="headerlink" title="提高课（搜索）"></a>提高课（搜索）</h1><h1 id="BFS-1"><a href="#BFS-1" class="headerlink" title="BFS"></a>BFS</h1><h2 id="Flood-Fill"><a href="#Flood-Fill" class="headerlink" title="Flood Fill"></a>Flood Fill</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1099/">池塘计数</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
using namespace std;
const int N &#x3D; 1010;
typedef pair&lt;int,int&gt; PII;
int n,m;
char g[N][N];
bool st[N][N];
int dx[8] &#x3D; &#123;-1,-1,-1,0,0,1,1,1&#125;, dy[8] &#x3D; &#123;-1,0,1,1,-1,0,1,-1&#125;;
void bfs(int i,int j)&#123;
    queue&lt;PII&gt; q;
    q.push(&#123;i,j&#125;);
    while(!q.empty())&#123;
        auto t &#x3D; q.front();
        q.pop();
        st[t.first][t.second] &#x3D; true;
        for(int i &#x3D; 0; i &lt; 8 ; i ++ )&#123;
            int x &#x3D; t.first + dx[i], y &#x3D; t.second + dy[i];
            if(x &gt;&#x3D; 0 &amp;&amp; x &lt; n &amp;&amp; y &gt;&#x3D; 0 &amp;&amp; y &lt;&#x3D; m &amp;&amp; g[x][y] &#x3D;&#x3D; &#39;W&#39; &amp;&amp; !st[x][y])&#123;
                q.push(&#123;x,y&#125;);
                st[x][y] &#x3D; true;
            &#125;
        &#125;
    &#125;
    return ;
&#125;

int main()&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        cin &gt;&gt; g[i];
    &#125;
    int res &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; m ; j ++ )&#123;
            if(!st[i][j] &amp;&amp; g[i][j] &#x3D;&#x3D; &#39;W&#39;)&#123;
                res ++ ;
                bfs(i, j);
            &#125;
        &#125;
    &#125;
    
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/activity/content/code/content/130772/">城堡问题</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#define x first
#define y second
using namespace std;
typedef pair&lt;int,int&gt; PII;

const int N &#x3D; 55, M &#x3D; N * N;
int n,m;
int g[N][N];
PII q[M];
bool st[N][N];


int bfs(int sx,int sy)
&#123;
    int dx[4] &#x3D; &#123;0,-1,0,1&#125;, dy[4] &#x3D; &#123;-1,0,1,0&#125;;
    int area &#x3D; 0;
    
    int hh &#x3D; 0 , tt &#x3D; 0;
    q[0] &#x3D; &#123;sx,sy&#125;;
    st[sx][sy] &#x3D; true;
    while(hh &lt;&#x3D; tt)
    &#123;
        PII t &#x3D; q[hh++];
        area ++;
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )
        &#123;
            int a &#x3D; t.x + dx[i], b &#x3D; t.y + dy[i];
            if(a&lt;0 || a&gt;&#x3D; m || b &lt; 0 || b &gt;&#x3D; n ) continue;
            if(st[a][b]) continue;
            if(g[t.x][t.y] &gt;&gt; i &amp; 1) continue;
            
            q[++tt] &#x3D; &#123;a,b&#125;;
            st[a][b] &#x3D; true;
        &#125;
    &#125;
    return area;
&#125;

int main()
&#123;
    cin &gt;&gt; m &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )
            cin &gt;&gt; g[i][j];
            
    int cnt &#x3D; 0, area &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )
            if(!st[i][j])
            &#123;
                area &#x3D; max(area, bfs(i,j));
                cnt ++ ;
            &#125;
            
    cout &lt;&lt; cnt &lt;&lt; endl;
    cout &lt;&lt; area &lt;&lt; endl;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1108/">山峰和山谷</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#define x first
#define y second
using namespace std;
typedef pair&lt;int,int&gt; PII;

const int N &#x3D; 1010, M &#x3D; N * N;
int n;
int h[N][N];
PII q[M];
bool st[N][N];

void bfs(int sx,int sy,bool&amp; has_higher, bool&amp; has_lower)
&#123;
    int hh &#x3D; 0 , tt &#x3D; 0;
    q[0] &#x3D; &#123;sx,sy&#125;;
    st[sx][sy] &#x3D; true;
    
    while(hh&lt;&#x3D;tt)
    &#123;
        PII t &#x3D; q[hh++];
        
        for(int i &#x3D; t.x - 1 ; i &lt;&#x3D; t.x + 1 ; i ++ )
            for(int j &#x3D; t.y - 1 ; j &lt;&#x3D; t.y + 1 ; j ++ )
            &#123;
                if(i &#x3D;&#x3D; t.x &amp;&amp; j &#x3D;&#x3D; t.y) continue;
                if(i &lt; 0 || i &gt;&#x3D; n || j &lt; 0 || j &gt;&#x3D; n ) continue;
                if(h[i][j] !&#x3D; h[t.x][t.y]) &#x2F;&#x2F;如果高度不同
                &#123;
                    if(h[i][j] &gt; h[t.x][t.y]) has_higher &#x3D; true;
                    else has_lower &#x3D; true;
                &#125;else if(!st[i][j])
                &#123;
                    q[++tt] &#x3D; &#123;i,j&#125;;
                    st[i][j] &#x3D; true;
                &#125;
            &#125;
    &#125;
&#125;

int main()
&#123;
    scanf(&quot;%d&quot;,&amp;n);
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )
            scanf(&quot;%d&quot;,&amp;h[i][j]);
            
    int peak &#x3D; 0, valley &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )
            if(!st[i][j])
            &#123;
                bool has_higher &#x3D; false, has_lower &#x3D; false;
                bfs(i,j,has_higher,has_lower);
                if(!has_higher) peak++; &#x2F;&#x2F;没有比它高的说明是山峰
                if(!has_lower) valley++;
            &#125;
            
    cout &lt;&lt; peak &lt;&lt; &#39; &#39; &lt;&lt; valley &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="最短路模型"><a href="#最短路模型" class="headerlink" title="最短路模型"></a>最短路模型</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1078/">迷宫问题</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 1010;
typedef pair&lt;int,int&gt; PII;
int n;
int maze[N][N];
int dx[4] &#x3D; &#123;-1,0,1,0&#125;, dy[4] &#x3D; &#123;0,1,0,-1&#125;;
PII pre[N][N];
void bfs(int i,int j)&#123;
    queue&lt;PII&gt; q;
    q.push(&#123;i,j&#125;);
    memset(pre, -1, sizeof pre);
    pre[i][j] &#x3D; &#123;0,0&#125;;
    while(!q.empty())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; 0; i &lt; 4 ; i ++ )&#123;
            int x &#x3D; t.first + dx[i], y &#x3D; t.second + dy[i];
            if(x &lt; 0 || x &gt;&#x3D; n || y &lt; 0 || y &gt;&#x3D; n ) continue;
            if(pre[x][y].first !&#x3D; -1 || maze[x][y] &#x3D;&#x3D; 1) continue;
            q.push(&#123;x,y&#125;);
            pre[x][y] &#x3D; t;
        &#125;     
    &#125;
&#125;


int main()
&#123;
    cin &gt;&gt; n ;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
            cin &gt;&gt; maze[i][j];
        &#125;
    &#125;
    
    bfs(n - 1, n - 1); &#x2F;&#x2F;从终点遍历，可使得最后输出的点为正向
    PII end(0,0); &#x2F;&#x2F;起点
    
    while(true)&#123;
        cout &lt;&lt; end.first &lt;&lt; &#39; &#39; &lt;&lt; end.second &lt;&lt;endl;
        if(end.first &#x3D;&#x3D; n - 1 &amp;&amp; end.second &#x3D;&#x3D; n - 1) break;
        end &#x3D; pre[end.first][end.second];
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/190/">武士风度的牛</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
#define x first
#define y second 
using namespace std;
const int N &#x3D; 155;
typedef pair&lt;int,int&gt; PII;

int dx[8] &#x3D; &#123;-2,-2,-1,-1,1,1,2,2&#125;, dy[8] &#x3D; &#123;-1,1,2,-2,2,-2,1,-1&#125;;
char g[N][N];
int n, m;
int d[N][N];

void bfs(int sx,int sy)&#123;
    memset(d, -1, sizeof d);
    queue&lt;PII&gt; q;
    q.push(&#123;sx, sy&#125;);
    d[sx][sy] &#x3D; 0 ;
    while(!q.empty())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; 0 ; i &lt; 8 ; i ++ )&#123;
            int a &#x3D; t.x + dx[i], b &#x3D; t.y + dy[i];
            if(a &lt; 0 || a &gt;&#x3D; n || b &lt; 0 || b &gt;&#x3D; m) continue;
            if(d[a][b] !&#x3D; -1 || g[a][b] &#x3D;&#x3D; &#39;*&#39;) continue;
            &#x2F;&#x2F;if(g[a][b] &#x3D;&#x3D; &#39;H&#39;) return d[t.x][t.y] + 1;
            q.push(&#123;a,b&#125;);
            d[a][b] &#x3D; d[t.x][t.y] + 1;
        &#125;
    &#125;
&#125;

int main()&#123;
    cin &gt;&gt; m &gt;&gt; n;
    int kx,ky,hx,hy;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
        for(int j &#x3D; 0 ; j &lt; m ; j ++ ) 
        &#123;
            cin &gt;&gt; g[i][j];
            if(g[i][j] &#x3D;&#x3D; &#39;K&#39;) 
            &#123;
                kx &#x3D; i, ky &#x3D; j;
            &#125;else if(g[i][j] &#x3D;&#x3D; &#39;H&#39;)&#123;
                hx &#x3D; i, hy &#x3D; j;
            &#125;            
        &#125;

    bfs(kx, ky);
    cout &lt;&lt; d[hx][hy] &lt;&lt; endl;  
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1102/">抓住那头牛</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 1e5 + 10;
int n,k;
int d[N];

int bfs()&#123;
    memset(d, -1, sizeof d);
    queue&lt;int&gt; q;
    q.push(n);
    d[n] &#x3D; 0;
    while(!q.empty())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        if(t &#x3D;&#x3D; k) return d[k];
        if(t + 1 &lt; N &amp;&amp; d[t + 1] &#x3D;&#x3D; -1)&#123;
            d[t + 1] &#x3D; d[t] + 1;
            q.push(t+1);
        &#125;
        if(t - 1 &gt;&#x3D; 0 &amp;&amp; d[t - 1] &#x3D;&#x3D; -1)&#123;
            d[t - 1] &#x3D; d[t] + 1;
            q.push(t-1);
        &#125;
        if(t * 2 &lt; N &amp;&amp; d[t * 2] &#x3D;&#x3D; -1)&#123;
            d[t * 2] &#x3D; d[t] + 1;
            q.push(t*2);
        &#125;
    &#125;
&#125;

int main()&#123;
    cin &gt;&gt; n &gt;&gt; k;
    cout &lt;&lt; bfs() &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="多源bfs"><a href="#多源bfs" class="headerlink" title="多源bfs"></a>多源bfs</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/175/">矩阵距离</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
#define x first
#define y second
using namespace std;
const int N &#x3D; 1010;
typedef pair&lt;int,int&gt; PII;

int n,m;
char A[N][N];
queue&lt;PII&gt; q;
int d[N][N];
int dx[4] &#x3D; &#123;-1,0,1,0&#125; , dy[4] &#x3D; &#123;0,1,0,-1&#125;;
int main()&#123;
    cin &gt;&gt; n &gt;&gt; m;
    memset(d, -1, sizeof d);
    for(int i &#x3D; 0 ; i &lt; n ; i++ )&#123;
        for(int j &#x3D; 0 ; j &lt; m ; j ++ )&#123;
            cin &gt;&gt; A[i][j];
            if(A[i][j] &#x3D;&#x3D; &#39;1&#39;)&#123;
                q.push(&#123;i,j&#125;);
                d[i][j] &#x3D; 0;
            &#125;
        &#125;
    &#125;
    
    while(!q.empty())&#123;
        
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )&#123;
            int a &#x3D; t.x + dx[i], b &#x3D; t.y + dy[i];
            if(a &lt; 0 || a &gt;&#x3D; n || b &lt; 0 || b &gt;&#x3D; m) continue;
            if(d[a][b] !&#x3D; -1) continue;
            
            q.push(&#123;a,b&#125;);
            d[a][b] &#x3D;  d[t.x][t.y] + 1;
        &#125;
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; m ; j ++)&#123;
            cout &lt;&lt; d[i][j] &lt;&lt; &#39; &#39; ;
        &#125;
        cout &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="最小步数模型"><a href="#最小步数模型" class="headerlink" title="最小步数模型"></a>最小步数模型</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/activity/content/problem/content/1475/">魔板</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;

char a[10],b[10];
map&lt;string,int&gt; dist;&#x2F;&#x2F;&#123;字符串，变化次数&#125;
map&lt;string,pair&lt;char,string&gt;&gt; pre; &#x2F;&#x2F;&#123;新字符串，&#123;A&#x2F;B&#x2F;C，原字符串&#125;&#125;
string eend;&#x2F;&#x2F;用end有歧义

string get(string t, int op)
&#123;
    string k;
    if( op &#x3D;&#x3D; 0 ) k &#x3D; &#123;t[7], t[6], t[5], t[4], t[3], t[2], t[1], t[0]&#125;;&#x2F;&#x2F;&#39;A&#39;
    if( op &#x3D;&#x3D; 1 ) k &#x3D; &#123;t[3], t[0], t[1], t[2], t[5], t[6], t[7], t[4]&#125;;&#x2F;&#x2F;&#39;B&#39;
    if( op &#x3D;&#x3D; 2 ) k &#x3D; &#123;t[0], t[6], t[1], t[3], t[4], t[2], t[5], t[7]&#125;;&#x2F;&#x2F;&#39;C&#39;
    return k;
&#125;

int bfs()
&#123;
    string s &#x3D; &quot;12345678&quot;;
    queue&lt;string&gt; q;
    dist[s] &#x3D; 0;
    q.push(s);
    
    while(!q.empty())
    &#123;
        auto t &#x3D; q.front();
        q.pop();
        if(t &#x3D;&#x3D; eend) return dist[t];
        for(int i &#x3D; 0 ; i &lt; 3 ; i ++ )
        &#123;
            string s &#x3D; get(t,i);
            if(!dist.count(s))
            &#123;
                dist[s] &#x3D; dist[t] + 1;
                pre[s] &#x3D; &#123;&#39;A&#39; + i, t&#125;;
                q.push(s);
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    string start &#x3D; &quot;12345678&quot;, res;
    for(int i &#x3D; 1 ; i &lt;&#x3D; 8 ; i ++ ) cin &gt;&gt; a[i];
    
    for(int i &#x3D; 1 ; i &lt;&#x3D; 8 ; i ++ ) eend.push_back(a[i]);
    
    cout &lt;&lt; bfs() &lt;&lt; endl;
    while(eend !&#x3D; start)
    &#123;
        res +&#x3D; pre[eend].first;
        eend &#x3D; pre[eend].second;
    &#125;
    
    reverse(res.begin(), res.end());
    cout &lt;&lt; res ;
    
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="双向广搜"><a href="#双向广搜" class="headerlink" title="双向广搜"></a>双向广搜</h2><p>一般用到最小步数模型里，而不是flood fill和最短路模型里</p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/192/">字串变换</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;map&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 6;

int n;
string A,B; &#x2F;&#x2F;A是起始串，B是终止串
string a[N], b[N];&#x2F;&#x2F;a存储A字串，b存储B字串

int extend(queue&lt;string&gt;&amp; q, unordered_map&lt;string,int&gt;&amp; da, unordered_map&lt;string,int&gt;&amp; db, string a[N], string b[N])
&#123;
    int d &#x3D; da[q.front()];
    while(q.size() &amp;&amp; da[q.front()] &#x3D;&#x3D; d)
    &#123;
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; 0; i &lt; n ; i ++ )&#x2F;&#x2F;遍历所有规则
            for(int j &#x3D; 0 ; j &lt; t.size() ; j ++ ) &#x2F;&#x2F;遍历串
                if(t.substr(j, a[i].size()) &#x3D;&#x3D; a[i]) &#x2F;&#x2F;如果能够转换
                &#123;
                    string r &#x3D; t.substr(0, j) + b[i] + t.substr(j + a[i].size()); &#x2F;&#x2F;a串换为b串
                    if(db.count(r)) return da[t] + db[r] + 1;
                    if(da.count(r)) continue;
                    da[r] &#x3D; da[t] + 1;
                    q.push(r);
                &#125;
    &#125;
    return 11;
&#125;

int bfs()
&#123;
    &#x2F;&#x2F;BFS的扩展方式是：分别枚举在原字符串中使用替换规则的起点，和所使用的的替换规则。
    if(A &#x3D;&#x3D; B) return 0;
    queue&lt;string&gt; qa, qb;
    unordered_map&lt;string, int&gt; da,db;&#x2F;&#x2F;分别存储转换到该串需要几次
    
    qa.push(A), qb.push(B);
    da[A] &#x3D; db[B] &#x3D; 0;
    
    int step &#x3D; 0;
    while(qa.size() &amp;&amp; qb.size())
    &#123;
        int t;
        if(qa.size() &lt; qb.size()) t &#x3D; extend(qa, da, db, a, b); &#x2F;&#x2F;从前往后扩展是a-&gt;b
        else t &#x3D; extend(qb, db, da, b ,a);&#x2F;&#x2F;从后往前扩展是b-&gt;a
        
        if(t &lt;&#x3D; 10) return t;
        if(++step &#x3D;&#x3D; 10) return -1;
    &#125;
    
    return -1;
&#125;

int main()
&#123;
    cin &gt;&gt; A &gt;&gt; B;
    while(cin &gt;&gt; a[n] &gt;&gt; b[n]) n++;
    
    int t &#x3D; bfs();
    if(t &#x3D;&#x3D; -1) puts(&quot;NO ANSWER!&quot;);
    else cout &lt;&lt; t &lt;&lt; endl;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="双端队列广搜"><a href="#双端队列广搜" class="headerlink" title="双端队列广搜"></a>双端队列广搜</h2><p>只包含0和1的两种边权重类型的最短路问题</p>
<p><strong>若扩展出来的边权重是0，则插入到队头，若为1，则插入到队尾</strong></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304182235040.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/177/">电路维修</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202304182249391.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;deque&gt;

#define x first
#define y second

using namespace std;

typedef pair&lt;int, int&gt; PII;

const int N &#x3D; 510, M &#x3D; N * N;

int n, m;
char g[N][N];
int dist[N][N];

int bfs()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[0][0] &#x3D; 0;
    deque&lt;PII&gt; q;
    q.push_back(&#123;0,0&#125;);
    
    char cs[] &#x3D; &quot;\\&#x2F;\\&#x2F;&quot; ; &#x2F;&#x2F;存储的是\&#x2F;\&#x2F;，因为\是转义，所以写两个
    int dx[4] &#x3D; &#123;-1,-1,1,1&#125;, dy[4] &#x3D; &#123;-1,1,1,-1&#125;; &#x2F;&#x2F;枚举每个点的对角线上的点
    int ix[4] &#x3D; &#123;-1,-1,0,0&#125;, iy[4] &#x3D; &#123;-1,0,0,-1&#125;; &#x2F;&#x2F;枚举某个点的邻边
    
    while(q.size())
    &#123;
        PII t &#x3D; q.front();
        q.pop_front();
        
        for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )
        &#123;
            int a &#x3D; t.x + dx[i], b &#x3D; t.y + dy[i];
            if(a &lt; 0 || a &gt; n || b &lt; 0 || b &gt; m) continue;
            
            int ca &#x3D; t.x + ix[i], cb &#x3D; t.y + iy[i];
            int d &#x3D; dist[t.x][t.y] + (g[ca][cb] !&#x3D; cs[i]);
            
            if(d &lt; dist[a][b])
            &#123;
                dist[a][b] &#x3D; d;
                if(g[ca][cb] !&#x3D; cs[i]) q.push_back(&#123;a,b&#125;);&#x2F;&#x2F;需要变化时插尾
                else q.push_front(&#123;a,b&#125;); &#x2F;&#x2F;不需要变化时插头
            &#125;
        &#125;
    &#125;
    
    return dist[n][m];
&#125;

int main()
&#123;
    int T;
    cin &gt;&gt; T;
    while(T--)
    &#123;
        cin &gt;&gt; n &gt;&gt; m;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; g[i];
        
        if(n + m &amp; 1) puts(&quot;NO SOLUTION&quot;); &#x2F;&#x2F;奇数点一定无解
        else cout &lt;&lt; bfs() &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="A"><a href="#A" class="headerlink" title="A*"></a>A*</h2><p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211141558143.png" alt="image-20221114155831954"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211141558743.png" alt="image-20221114155854649"></p>
<p>f[state]是state到终点的估计距离，g[state]是state到终点的真实距离</p>
<p>d[state]是起点到state的距离</p>
<p>A*算法必须保证f[state] &lt;= g[state]</p>
<p><strong>一定保证有解才可以搜，否则不如普通bfs</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/181/">八数码</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
#include &lt;unordered_map&gt;

using namespace std;

&#x2F;&#x2F;估价函数：当前状态中每个数与它的目标位置的曼哈顿距离之和

int f(string state)&#x2F;&#x2F;求曼哈顿距离
&#123;
    int res &#x3D; 0;
    for (int i &#x3D; 0; i &lt; state.size(); i ++ )
        if (state[i] !&#x3D; &#39;x&#39;)
        &#123;
            int t &#x3D; state[i] - &#39;1&#39;;
            res +&#x3D; abs(i &#x2F; 3 - t &#x2F; 3) + abs(i % 3 - t % 3);
        &#125;
    return res;
&#125;

string bfs(string start)
&#123;
    int dx[4] &#x3D; &#123;-1, 0, 1, 0&#125;, dy[4] &#x3D; &#123;0, 1, 0, -1&#125;;
    char op[4] &#x3D; &#123;&#39;u&#39;, &#39;r&#39;, &#39;d&#39;, &#39;l&#39;&#125;;

    string end &#x3D; &quot;12345678x&quot;;
    unordered_map&lt;string, int&gt; dist; &#x2F;&#x2F;存储实际距离
    unordered_map&lt;string, pair&lt;string, char&gt;&gt; prev;&#x2F;&#x2F; &#123;新串，&#123;源串，变换记录&#125;&#125;
    priority_queue&lt;pair&lt;int, string&gt;, vector&lt;pair&lt;int, string&gt;&gt;, greater&lt;pair&lt;int, string&gt;&gt;&gt; heap;&#x2F;&#x2F;小根堆

    heap.push(&#123;f(start), start&#125;);
    dist[start] &#x3D; 0;

    while (heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();

        string state &#x3D; t.second;

        if (state &#x3D;&#x3D; end) break;

        int step &#x3D; dist[state];
        int x, y;
        for (int i &#x3D; 0; i &lt; state.size(); i ++ )
            if (state[i] &#x3D;&#x3D; &#39;x&#39;)
            &#123;
                x &#x3D; i &#x2F; 3, y &#x3D; i % 3;&#x2F;&#x2F;找到x的横纵坐标
                break;
            &#125;
        string source &#x3D; state;
        for (int i &#x3D; 0; i &lt; 4; i ++ ) &#x2F;&#x2F;扩展x
        &#123;
            int a &#x3D; x + dx[i], b &#x3D; y + dy[i];
            if (a &gt;&#x3D; 0 &amp;&amp; a &lt; 3 &amp;&amp; b &gt;&#x3D; 0 &amp;&amp; b &lt; 3)
            &#123;
                swap(state[x * 3 + y], state[a * 3 + b]);
                if (!dist.count(state) || dist[state] &gt; step + 1)
                 &#x2F;&#x2F;除了终点之外，当第一次搜到某个点的时候，距离不一定是最短的，其dist[]的值是不断变小的，所以要加后面一个判断
                &#123;
                    dist[state] &#x3D; step + 1;
                    prev[state] &#x3D; &#123;source, op[i]&#125;;
                    heap.push(&#123;dist[state] + f(state), state&#125;);&#x2F;&#x2F;实际距离加估算距离放入堆
                &#125;
                swap(state[x * 3 + y], state[a * 3 + b]);
            &#125;
        &#125;
    &#125;

    string res;
    while (end !&#x3D; start)
    &#123;
        res +&#x3D; prev[end].second;
        end &#x3D; prev[end].first;
    &#125;
    reverse(res.begin(), res.end());
    return res;
&#125;

int main()
&#123;
    string g, c, seq;&#x2F;&#x2F;seq存储无x的字符串
    while (cin &gt;&gt; c)
    &#123;
        g +&#x3D; c;
        if (c !&#x3D; &quot;x&quot;) seq +&#x3D; c;
    &#125;

    int t &#x3D; 0;&#x2F;&#x2F;求逆序对个数
    for (int i &#x3D; 0; i &lt; seq.size(); i ++ )
        for (int j &#x3D; i + 1; j &lt; seq.size(); j ++ )
            if (seq[i] &gt; seq[j])
                t ++ ;

    if (t % 2) puts(&quot;unsolvable&quot;);&#x2F;&#x2F;奇数个逆序对无解
    else cout &lt;&lt; bfs(g) &lt;&lt; endl;

    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/180/">第K短路</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;

#define x first
#define y second

using namespace std;

typedef pair&lt;int, int&gt; PII;
typedef pair&lt;int, PII&gt; PIII;

const int N &#x3D; 1010, M &#x3D; 200010;

int n,m,S,T,K;
int h[N],rh[N],e[M],w[M],ne[M],idx;
int dist[N],cnt[N];
bool st[N];

void add(int h[],int a,int b,int c)
&#123;
    e[idx] &#x3D; b,w[idx] &#x3D; c,ne[idx] &#x3D; h[a], h[a] &#x3D; idx++;
&#125;

&#x2F;&#x2F;估计距离：通过反向邻接表djkstra算法求出终点到所有点的最短距离
void djsktra()
&#123;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0,T&#125;);
    
    memset(dist, 0x3f,sizeof dist);
    dist[T] &#x3D; 0;
    
    while(heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.y;
        if(st[ver])  continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; rh[ver]; ~i; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if(dist[j] &gt; dist[ver] + w[i])
            &#123;
                dist[j] &#x3D; dist[ver] + w[i]; 
                heap.push(&#123;dist[j],j&#125;);
            &#125;
        &#125;
    &#125;
&#125;

int astar()
&#123;
    priority_queue&lt;PIII,vector&lt;PIII&gt;,greater&lt;PIII&gt;&gt; heap;
    heap.push(&#123;dist[S],&#123;0,S&#125;&#125;);
    
    while(heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.y.y, distance &#x3D; t.y.x;
        cnt[ver] ++ ;
        if(cnt[T] &#x3D;&#x3D; K) return distance;
        
        for(int i &#x3D; h[ver]; ~i ; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if(cnt[j] &lt; K)
                heap.push(&#123;distance + w[i] + dist[j], &#123;distance + w[i], j&#125;&#125;);
        &#125;
    &#125;
    
    return -1;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof h); &#x2F;&#x2F;正向邻接表
    memset(rh, -1, sizeof rh); &#x2F;&#x2F;反向邻接表
    
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(h, a, b, c);
        add(rh, b, a, c);
    &#125;
    
    cin &gt;&gt; S &gt;&gt; T &gt;&gt; K;
    if(S &#x3D;&#x3D; T)  K ++ ;
    
    djsktra();
    cout &lt;&lt; astar() &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="DFS-1"><a href="#DFS-1" class="headerlink" title="DFS"></a>DFS</h1><h2 id="连通性模型"><a href="#连通性模型" class="headerlink" title="连通性模型"></a>连通性模型</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1114/">迷宫</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 110;
int Q;
int dx[4] &#x3D; &#123;-1,0,1,0&#125;, dy[4] &#x3D; &#123;0,1,0,-1&#125;;
bool st[N][N];
char g[N][N];
int n;
int ha, la, hb, lb;

bool dfs(int ha,int la)&#123;
    if(g[ha][la] &#x3D;&#x3D; &#39;#&#39;) return false;
    if(ha &#x3D;&#x3D; hb &amp;&amp; la &#x3D;&#x3D; lb)&#123;
        return true;
    &#125;

    st[ha][la] &#x3D; true;
    for(int i &#x3D; 0; i &lt; 4 ; i ++ )&#123;
        int x &#x3D; ha + dx[i] , y &#x3D; la + dy[i];
        
        if(x &lt; 0 || x &gt;&#x3D; n || y &lt; 0 || y &gt;&#x3D; n ) continue;
        if(st[x][y]) continue;
        if(dfs(x,y)) return true;
    &#125;
    
    return false;
&#125;


int main()&#123;
    cin &gt;&gt; Q;
    while(Q--)&#123;
        memset (st,false,sizeof (st));
        cin &gt;&gt; n;
        for(int i &#x3D; 0; i &lt; n ; i ++ )&#123;
            for(int j &#x3D; 0; j &lt; n ; j ++ )&#123;
                cin &gt;&gt; g[i][j];
            &#125;
        &#125;
        cin &gt;&gt; ha &gt;&gt; la &gt;&gt; hb &gt;&gt; lb;
        if(dfs(ha,la)) cout &lt;&lt;&quot;YES&quot; &lt;&lt; endl;
        else cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1115/">红与黑</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;
const int N &#x3D; 25;
int w,h;
char g[N][N];
bool st[N][N];
int dx[4] &#x3D; &#123;-1,0,1,0&#125;, dy[4] &#x3D; &#123;0,1,0,-1&#125;;
int dfs(int x,int y)&#123;
    int cnt &#x3D; 1;
    st[x][y] &#x3D; true;
    for(int i &#x3D; 0 ; i &lt; 4 ; i ++ )&#123;
        int a &#x3D; x + dx[i], b &#x3D; y + dy[i];
        if(a &lt; 0 || a &gt;&#x3D; h || b &lt; 0 || b &gt;&#x3D; w) continue;
        if(st[a][b] || g[a][b] &#x3D;&#x3D; &#39;#&#39;) continue;
        cnt +&#x3D; dfs(a,b);
    &#125;
    
    return cnt;
&#125;

int main()&#123;
    while(cin &gt;&gt; w &gt;&gt; h , w || h)&#123;
        int x,y;
        for(int i &#x3D; 0 ; i &lt; h ; i ++ )
            for(int j &#x3D; 0 ; j &lt; w ; j ++ )
                &#123;
                    cin &gt;&gt; g[i][j];
                    if(g[i][j] &#x3D;&#x3D; &#39;@&#39;) 
                    &#123;
                        x &#x3D; i, y &#x3D; j;
                    &#125;
                &#125;
        memset(st, 0, sizeof st);
        cout &lt;&lt; dfs(x,y) &lt;&lt; endl;
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="搜索顺序"><a href="#搜索顺序" class="headerlink" title="搜索顺序"></a>搜索顺序</h2><p>当为内部搜索，比如一个棋盘它本身的状态进行改变时，需要用到中间状态，则需要回溯；当为外部搜索，比如一个棋盘某个点到另一个点的连通性，不用考虑中间状态，则不需要回溯</p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1118/">马走日</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 10;
int T;
int n,m;
int x,y;
int g[N][N];
bool st[N][N];
int dx[8] &#x3D; &#123;-2,-1,1,2,2,1,-1,-2&#125;, dy[8] &#x3D; &#123;1,2,2,1,-1,-2,-2,-1&#125;;
int res;

void dfs(int x,int y,int cnt)&#123;
    
    if(cnt &#x3D;&#x3D; n * m)&#123;
        res ++ ;
        return ;
    &#125;
    
    st[x][y] &#x3D; true;
    
    for(int i &#x3D; 0 ; i &lt; 8 ; i ++ )&#123;
        int a &#x3D; x + dx[i], b &#x3D; y + dy[i];
        if(a &lt; 0 || a &gt;&#x3D; n || b &lt; 0 || b &gt;&#x3D; m ) continue;
        if(st[a][b]) continue;
        
        dfs(a,b, cnt + 1);
    &#125;
     
    st[x][y] &#x3D; false;
&#125;

int main()&#123;
    cin &gt;&gt; T;
    while(T --)&#123;
        cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y;
        res &#x3D; 0;
        dfs(x, y, 1);
        cout &lt;&lt; res  &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1119/">单词接龙</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N &#x3D; 25;

int n;
string word[N];
int g[N][N];&#x2F;&#x2F;g[i][j] 表示word[i]的后缀和word[j]的前缀的最小相同长度
int used[N];
int res;

void dfs(string dragon,int last)&#123;&#x2F;&#x2F;last表示上个字符串下标
    res &#x3D; max((int)dragon.size(), res);
    used[last] ++ ;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        if(g[last][i] &amp;&amp; used[i] &lt; 2)&#123;
            dfs(dragon + word[i].substr(g[last][i]), i);
            &#x2F;&#x2F;substr()函数若只有一个参数，说明是从某个位置到末尾
            &#x2F;&#x2F;该语句是将龙头加上新的拼接字符串作为新的龙头，进而不断递归
        &#125;
    &#125;
    
    used[last] -- ;
&#125; 

int main()&#123;
    cin &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        cin &gt;&gt; word[i];
    &#125;
    
    char start;
    cin &gt;&gt; start;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
            string a &#x3D; word[i], b &#x3D; word[j];
            for(int k &#x3D; 1 ; k &lt; min(a.size(), b.size()); k ++ )&#123;
                if(a.substr(a.size() - k, k) &#x3D;&#x3D; b.substr(0,k))&#123;
                    g[i][j] &#x3D; k;
                    break;
                &#125;
            &#125;
        &#125;
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        if(word[i][0] &#x3D;&#x3D; start)
            dfs(word[i], i);
    &#125;
    
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1120/">分成互质组</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 10;
int n;

int p[N];
int group[N][N];&#x2F;&#x2F;group[i]表示第i组中下标对应的p数组中的数互质
bool st[N];
int res &#x3D; N; &#x2F;&#x2F;最坏情况分为N组

int gcd(int a,int b)&#123; &#x2F;&#x2F;判断是否互质(求最大公因数)
    return b ?gcd(b, a % b): a;
&#125;

bool check(int group[],int gc,int i)&#123;
    for(int j &#x3D; 0 ; j &lt; gc ; j ++ )&#123;
        if(gcd(p[group[j]], p[i]) &gt; 1)
        return false;
    &#125;
    return true;
&#125;

&#x2F;&#x2F;g表示当前做到了哪一组，gc表示当前枚举到组内的第几个元素，tc表示当前一共处理多少个数，start表示组内从哪个数开始枚举
void dfs(int g,int gc,int tc,int start)&#123;
    if(g &gt;&#x3D; res) return ;
    if(tc &#x3D;&#x3D; n) res &#x3D; g; &#x2F;&#x2F;所有数均处理完
    
    bool flag &#x3D; true;
    for(int i &#x3D; start ; i &lt; n ; i ++ ) &#123;
        if(!st[i] &amp;&amp; check(group[g], gc, i))
        &#123;
            st[i] &#x3D; true;
            group[g][gc] &#x3D; i;
            dfs(g, gc + 1, tc + 1, i + 1);
            st[i] &#x3D; false;
            flag &#x3D; false;
        &#125;
    &#125;
    
    if(flag) dfs(g + 1,0, tc, 0); &#x2F;&#x2F;如果没找到互质的，则开启下一组
    return ;
&#125;

int main()
&#123;
    cin &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; p[i];
    
    dfs(1,0,0,0);
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="剪枝与优化"><a href="#剪枝与优化" class="headerlink" title="剪枝与优化"></a>剪枝与优化</h2><p> <img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211152120432.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/167/">小猫爬山</a></p>
<p>1 -&gt; 猫按照重量由大到小排序，先放重猫（优先考虑决策少的方案）</p>
<p>3 -&gt; 当前某个猫放到车上超出车承重，直接删去</p>
<p>4 -&gt; 某个方案大于res，直接剪枝</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;
const int N &#x3D; 20;

int cat[N], cab[N];
int n, w;
int res &#x3D; N;

bool cmp(int a,int b)&#123;
    return a &gt; b;
&#125;

&#x2F;&#x2F;第u条猫，第k辆车
void dfs(int u, int k)&#123;
    &#x2F;&#x2F;最优性剪枝
    if(k &gt;&#x3D; res) return ;
    if(u &#x3D;&#x3D; n)&#123;
        res &#x3D; k;
        return ;
    &#125; 
    
    for(int i &#x3D; 0 ; i &lt; k ; i ++ )&#123;
        if(cab[i] + cat[u] &lt;&#x3D; w)&#123;
            cab[i] +&#x3D; cat[u];
            dfs(u + 1, k);
            cab[i] -&#x3D; cat[u];
        &#125;
    &#125;
    
    &#x2F;&#x2F;新开一辆车
    cab[k] &#x3D; cat[u];
    dfs(u + 1, k + 1);
    cab[k] &#x3D; 0;
&#125;

int main()&#123;
    cin &gt;&gt; n &gt;&gt; w;
    
    for(int i &#x3D; 0 ; i &lt; n ; i++ ) cin &gt;&gt; cat[i];
    
    sort(cat, cat + n, cmp);
    
    dfs(0,0);
    
    cout &lt;&lt; res &lt;&lt; endl;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/168/">数独</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;

using namespace std;

const int N &#x3D; 9, M &#x3D; 1 &lt;&lt; N;
&#x2F;&#x2F;用一个二进制数表示当前行，或列或方格的状态，如100110010，则表示可填的是1,4,5,8
int ones[M], map[M];&#x2F;&#x2F;ones保存每个状态有多少个1，map[i]保存lg(i)为多少
int row[N], col[N], cell[3][3];
char str[100];

void init()
&#123;
    for (int i &#x3D; 0; i &lt; N; i ++ )
        row[i] &#x3D; col[i] &#x3D; (1 &lt;&lt; N) - 1;

    for (int i &#x3D; 0; i &lt; 3; i ++ )
        for (int j &#x3D; 0; j &lt; 3; j ++ )
            cell[i][j] &#x3D; (1 &lt;&lt; N) - 1;
&#125;

void draw(int x, int y, int t, bool is_set)&#x2F;&#x2F;若is_set是true，则是在(x,y)添加t，若is_set是false，则是删去(x,y)这个数 
&#123;
    if (is_set) str[x * N + y] &#x3D; &#39;1&#39; + t;
    else str[x * N + y] &#x3D; &#39;.&#39;;

    int v &#x3D; 1 &lt;&lt; t;
    if (!is_set) v &#x3D; -v;

    row[x] -&#x3D; v;
    col[y] -&#x3D; v;
    cell[x &#x2F; 3][y &#x2F; 3] -&#x3D; v;
&#125;

int lowbit(int x)&#x2F;&#x2F;返回二进制的最后一位1
&#123;
    return x &amp; -x;
&#125;

int get(int x, int y)&#x2F;&#x2F;找到所有可填的二进制状态
&#123;
    return row[x] &amp; col[y] &amp; cell[x &#x2F; 3][y &#x2F; 3];
&#125;

bool dfs(int cnt)
&#123;
    if (!cnt) return true;

    int minv &#x3D; 10;
    int x, y;
    for (int i &#x3D; 0; i &lt; N; i ++ )
        for (int j &#x3D; 0; j &lt; N; j ++ )
            if (str[i * N + j] &#x3D;&#x3D; &#39;.&#39;)
            &#123;
                int state &#x3D; get(i, j);
                if (ones[state] &lt; minv)
                &#123;
                    minv &#x3D; ones[state];
                    x &#x3D; i, y &#x3D; j;
                &#125;
            &#125;

    int state &#x3D; get(x, y);
    for (int i &#x3D; state; i; i -&#x3D; lowbit(i))
    &#123;
        int t &#x3D; map[lowbit(i)];
        draw(x, y, t, true);
        if (dfs(cnt - 1)) return true;
        draw(x, y, t, false);
    &#125;

    return false;
&#125;

int main()
&#123;
    for (int i &#x3D; 0; i &lt; N; i ++ ) map[1 &lt;&lt; i] &#x3D; i;
    for (int i &#x3D; 0; i &lt; 1 &lt;&lt; N; i ++ )
        for (int j &#x3D; 0; j &lt; N; j ++ )
            ones[i] +&#x3D; i &gt;&gt; j &amp; 1;

    while (cin &gt;&gt; str, str[0] !&#x3D; &#39;e&#39;)
    &#123;
        init();

        int cnt &#x3D; 0;
        for (int i &#x3D; 0, k &#x3D; 0; i &lt; N; i ++ )
            for (int j &#x3D; 0; j &lt; N; j ++, k ++ )
                if (str[k] !&#x3D; &#39;.&#39;)
                &#123;
                    int t &#x3D; str[k] - &#39;1&#39;;
                    draw(i, j, t, true);
                &#125;
                else cnt ++ ;

        dfs(cnt);

        puts(str);
    &#125;

    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/168/">木棒</a></p>
<p>先从小到大枚举木棒的长度，对于每个长度，从前往后依此拼接木棍，从而找到合法方案</p>
<p>1 -&gt; 先枚举长度更长的木棍</p>
<p>2 -&gt; 排除等效冗余:（1）按照组合数的方式枚举（2）如果当前木棍加到当前棒中失败了，则直接略过后面所有长度相等的木棍</p>
<p>​        （3）如果木棒的第一根木棍失败了，则该方案一定失败（4）如果木棒的最后一根木棍失败了，则该方案一定失败</p>
<p>3 -&gt; 只枚举木棍长度和sum的约数</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;

const int N &#x3D; 70;

int n;
int w[N];
int sum,length;
bool st[N];

bool dfs(int u,int cur,int start) &#x2F;&#x2F;u枚举木棒的个数，cur表示当前已经接上木棍的长度，start表示枚举的木棍下标
&#123;
    if(u * length &#x3D;&#x3D; sum) return true;
    if(cur &#x3D;&#x3D; length) return dfs(u + 1, 0, 0);
    
    &#x2F;&#x2F;剪枝3-1，i从start开始枚举
    for(int i &#x3D; start; i &lt; n ; i ++ )
    &#123;
        if(st[i] || cur + w[i] &gt; length) continue; &#x2F;&#x2F;可行性剪枝
        
        st[i] &#x3D; true;
        if(dfs(u,cur + w[i], i + 1)) return true;
        st[i] &#x3D; false;
        
        &#x2F;&#x2F;剪枝3-3和3-4
        if(!cur || cur + w[i] &#x3D;&#x3D; length) return false;
        
        &#x2F;&#x2F;剪枝3-2
        int j &#x3D; i;
        while(j &lt; n &amp;&amp; w[j] &#x3D;&#x3D; w[i]) j ++ ;
        i &#x3D; j - 1;
    &#125;
    
    return false;
&#125;

int main()
&#123;
    while(cin &gt;&gt; n, n)
    &#123;
        memset(st,0,sizeof st);
        sum &#x3D; 0;
        
        for(int i &#x3D; 0; i &lt; n ; i ++ )
        &#123;
            cin &gt;&gt; w[i];
            sum +&#x3D; w[i];
        &#125;
        
        &#x2F;&#x2F;剪枝2，优化搜索顺序
        sort(w,w+n);
        reverse(w,w+n);
        
        length &#x3D; 1;
        while(true)
        &#123;
            &#x2F;&#x2F;剪枝1
            if(sum % length &#x3D;&#x3D; 0 &amp;&amp; dfs(0,0,0))
            &#123;
                cout &lt;&lt; length &lt;&lt; endl;
                break;
            &#125;
            length ++ ;
        &#125;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/170/">生日蛋糕</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211161030094.png" alt="image-20221116103052877"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;cmath&gt;
using namespace std;
const int N &#x3D; 25, INF &#x3D; 1e9;

int n,m;
int minv[N],mins[N];&#x2F;&#x2F;前若干层的体积最小值和面积最小值
int R[N], H[N];&#x2F;&#x2F;每一层的半径和高度
int res &#x3D; INF;

void dfs(int u,int v,int s) &#x2F;&#x2F;u枚举的层数，v当前枚举体积,s当前枚举表面积
&#123;
    if(v + minv[u] &gt; n) return;
    if(s + mins[u] &gt;&#x3D; res) return;
    if(s + 2 * (n - v) &#x2F; R[u + 1] &gt;&#x3D; res) return ;
    
    if(!u)
    &#123;
        if(v &#x3D;&#x3D; n) res &#x3D; s;
        return ;
    &#125;
    
    for(int r &#x3D; min(R[u+1] - 1,(int)sqrt(n-v)); r &gt;&#x3D; u; r --)
        for(int h &#x3D; min(H[u+1] - 1,(n-v) &#x2F;r &#x2F;r ); h &gt;&#x3D; u;h -- )
        &#123;
            int t &#x3D; 0;
            if(u &#x3D;&#x3D; m) t &#x3D; r * r;
            R[u] &#x3D; r,H[u] &#x3D; h;
            dfs(u - 1, v + r * r * h, s + 2 * r * h + t);
        &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 1 ; i &lt;&#x3D; m ; i ++ )
    &#123;
        minv[i] &#x3D; minv[i-1] + i * i * i;
        mins[i] &#x3D; mins[i-1] + 2 * i * i;
    &#125;
    R[m + 1] &#x3D; H[m + 1] &#x3D; INF;
    
    dfs(m, 0, 0);
    
    if(res &#x3D;&#x3D; INF) res &#x3D; 0;
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="迭代加深"><a href="#迭代加深" class="headerlink" title="迭代加深"></a>迭代加深</h2><p>适合于某些分支特别深，但是答案在比较浅的分支的问题</p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/172/">加成序列</a></p>
<p>剪枝1：优先枚举较大的数</p>
<p>剪枝2：排除等效冗余，如果某两对数和相等，只需要枚举其中一对</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;

const int N &#x3D; 110;
int path[N] ;
int n;

&#x2F;&#x2F;u当前迭代的点，k当前迭代的层数
bool dfs(int u,int k)&#123;
    if(u &#x3D;&#x3D; k) return path[u - 1] &#x3D;&#x3D; n; 
    
    bool st[N] &#x3D; &#123;0&#125;;
    for(int i &#x3D; u - 1; i &gt;&#x3D; 0 ; i -- )&#123;
        for(int j &#x3D; i ; j &gt;&#x3D; 0 ; j -- )&#123;
            int s &#x3D; path[i] + path[j];
            if(s &gt; n || s &lt;&#x3D; path[u - 1] || st[s]) continue;
            st[s] &#x3D; true;
            path[u] &#x3D; s;
            if(dfs(u + 1, k)) return true;
        &#125;
    &#125;
    
    return false;
&#125;

int main()&#123;
    path[0] &#x3D; 1;
    while(cin &gt;&gt; n , n)&#123;
        int k &#x3D; 1;
        while(!dfs(1, k)) k ++ ;
        for(int i &#x3D; 0 ; i &lt; k ; i ++ )&#123;
            cout &lt;&lt; path[i] &lt;&lt; &#39; &#39;;
        &#125;
        cout &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="双向DFS"><a href="#双向DFS" class="headerlink" title="双向DFS"></a>双向DFS</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/173/">送礼物</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211161937320.png"></p>
<p>其中k是指2^k与 2^(N-k)*k相接近最合适的数，这里取了n/2</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202211161939441.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

using namespace std;

typedef long long LL;

const int N &#x3D; 1 &lt;&lt; 24;

int n, m, k;
int g[50], weights[N];
int cnt &#x3D; 0;
int ans;


void dfs(int u, int s)
&#123;
    if (u &#x3D;&#x3D; k)
    &#123;
        weights[cnt ++ ] &#x3D; s;
        return;
    &#125;

    if ((LL)s + g[u] &lt;&#x3D; m) dfs(u + 1, s + g[u]);
    dfs(u + 1, s);
&#125;


void dfs2(int u, int s)
&#123;
    if (u &#x3D;&#x3D; n)
    &#123;
        int l &#x3D; 0, r &#x3D; cnt - 1;
        while (l &lt; r)
        &#123;
            int mid &#x3D; l + r + 1 &gt;&gt; 1;
            if (weights[mid] + (LL)s &lt;&#x3D; m) l &#x3D; mid;
            else r &#x3D; mid - 1;
        &#125;
        if (weights[l] + (LL)s &lt;&#x3D; m) ans &#x3D; max(ans, weights[l] + s);

        return;
    &#125;

    if ((LL)s + g[u] &lt;&#x3D; m) dfs2(u + 1, s + g[u]);
    dfs2(u + 1, s);
&#125;


int main()
&#123;
    cin &gt;&gt; m &gt;&gt; n;
    for (int i &#x3D; 0; i &lt; n; i ++ ) cin &gt;&gt; g[i];

    sort(g, g + n);
    reverse(g, g + n);

    k &#x3D; n &#x2F; 2;  &#x2F;&#x2F; 防止 n &#x3D; 1时，出现死循环
    dfs(0, 0);

    sort(weights, weights + cnt);
    int t &#x3D; 1;
    for (int i &#x3D; 1; i &lt; cnt; i ++ )
        if (weights[i] !&#x3D; weights[i - 1])
            weights[t ++ ] &#x3D; weights[i];
    cnt &#x3D; t;

    dfs2(k, 0);

    cout &lt;&lt; ans &lt;&lt; endl;

    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
typedef long long LL;
const int N &#x3D; 46;

int n,m,k;
int w[N];
int weights[1 &lt;&lt; 25], cnt &#x3D; 1;
int ans; &#x2F;&#x2F;全局最小值

&#x2F;&#x2F;u是当前枚举到的数,s是当前的和
void dfs1(int u,int s)&#123;
    if(u &#x3D;&#x3D; k)&#123;
        weights[cnt ++ ] &#x3D; s;
        return ;
    &#125;
    
    dfs1(u + 1, s) ; &#x2F;&#x2F;不选当前的物品
    if((LL)s + w[u] &lt;&#x3D; m) dfs1(u + 1, s + w[u]); &#x2F;&#x2F;选当前物品
&#125;

void dfs2(int u,int s)&#123;
    if(u &gt;&#x3D; n)&#123; &#x2F;&#x2F;二分求出w - s的最大值
        int l &#x3D; 0 , r &#x3D; cnt - 1;
        while(l &lt; r)&#123;
            int mid &#x3D; l + r + 1 &gt;&gt; 1;
            if(weights[mid] &lt;&#x3D; m - s) l &#x3D; mid;
            else r &#x3D; mid - 1;
        &#125;
        
        ans &#x3D; max(ans, weights[l] + s);
        return ;
    &#125;
    
    dfs2(u + 1, s);
    if((LL) s + w[u] &lt;&#x3D; m) dfs2(u + 1, s + w[u]);
&#125;

int main()
&#123;
    cin &gt;&gt; m &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; w[i];
    
    sort(w, w + n);
    reverse(w, w + n);
    
    k &#x3D; n &gt;&gt; 1;
    dfs1(0, 0);
    
    sort(weights, weights + cnt);
    cnt &#x3D; unique(weights, weights + cnt) - weights; &#x2F;&#x2F;判重
    
    dfs2(k, 0);
    
    cout &lt;&lt; ans &lt;&lt; endl;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="IDA"><a href="#IDA" class="headerlink" title="IDA*"></a>IDA*</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/182/">排书</a></p>
<p>估价函数：total/3上取整（total存的是错误后继的数量，后面一个数比前面一个大1就是一个正确的后继</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;
const int N &#x3D; 15;

int n;
int q[N]; &#x2F;&#x2F; 存储该序列
int w[5][N]; &#x2F;&#x2F; 存储现场，方便恢复现场

int f() &#x2F;&#x2F; 估价函数
&#123;
    int cnt &#x3D; 0;
    for(int i &#x3D; 0 ; i + 1 &lt; n ; i ++ )
        if(q[i + 1] !&#x3D; q[i] + 1)
            cnt ++ ;
    return (cnt + 2) &#x2F; 3;
&#125;

bool check() &#x2F;&#x2F;检查是否有错误后继
&#123;
    for(int i &#x3D; 0; i + 1 &lt; n ; i ++ )
        if(q[i + 1] !&#x3D; q[i] + 1)
            return false;
    return true;
&#125;

bool dfs(int depth, int max_depth)&#x2F;&#x2F;当前迭代深度，最大迭代深度
&#123;
    if (depth + f() &gt; max_depth) return false;
    if (check()) return true;

    for (int len &#x3D; 1; len &lt;&#x3D; n; len ++ )
        for (int l &#x3D; 0; l + len - 1 &lt; n; l ++ )
        &#123;
            int r &#x3D; l + len - 1;
            for (int k &#x3D; r + 1; k &lt; n; k ++ )
            &#123;
                memcpy(w[depth], q, sizeof q);
                int x, y;
                for (x &#x3D; r + 1, y &#x3D; l; x &lt;&#x3D; k; x ++, y ++ ) q[y] &#x3D; w[depth][x];
                for (x &#x3D; l; x &lt;&#x3D; r; x ++, y ++ ) q[y] &#x3D; w[depth][x];
                if (dfs(depth + 1, max_depth)) return true;
                memcpy(q, w[depth], sizeof q);
            &#125;
        &#125;

    return false;
&#125;

int main()
&#123;
    int T;
    cin &gt;&gt; T;
    while(T --)
    &#123;
        cin &gt;&gt; n;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; q[i];
        int depth &#x3D; 0;
        while(depth &lt; 5 &amp;&amp; !dfs(0,depth)) depth ++ ;
        if(depth &gt;&#x3D; 5) puts(&quot;5 or more&quot;);
        else cout &lt;&lt; depth &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a href="">回转游戏</a></p>
<p>估价函数：设中间八个数重复次数最多的数是s次，则其估价函数为8-s</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;*
      0     1
      2     3
4  5  6  7  8  9  10
      11    12
13 14 15 16 17 18 19
      20    21
      22    23
*&#x2F;

#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;

using namespace std;

const int N &#x3D; 24;

int op[8][7] &#x3D; &#123;
    &#123;0, 2, 6, 11, 15, 20, 22&#125;,
    &#123;1, 3, 8, 12, 17, 21, 23&#125;,
    &#123;10, 9, 8, 7, 6, 5, 4&#125;,
    &#123;19, 18, 17, 16, 15, 14, 13&#125;,
    &#123;23, 21, 17, 12, 8, 3, 1&#125;,
    &#123;22, 20, 15, 11, 6, 2, 0&#125;,
    &#123;13, 14, 15, 16, 17, 18, 19&#125;,
    &#123;4, 5, 6, 7, 8, 9, 10&#125;
&#125;;

int oppsite[8] &#x3D; &#123;5, 4, 7, 6, 1, 0, 3, 2&#125;;
int center[8] &#x3D; &#123;6, 7, 8, 11, 12, 15, 16, 17&#125;;

int q[N];
int path[100];

int f() &#x2F;&#x2F;估价函数
&#123;
    static int sum[4];
    memset(sum, 0, sizeof sum);
    for (int i &#x3D; 0; i &lt; 8; i ++ ) sum[q[center[i]]] ++ ;

    int maxv &#x3D; 0;
    for (int i &#x3D; 1; i &lt;&#x3D; 3; i ++ ) maxv &#x3D; max(maxv, sum[i]);

    return 8 - maxv;
&#125;

void operate(int x) &#x2F;&#x2F;模拟八个操作
&#123;
    int t &#x3D; q[op[x][0]];
    for (int i &#x3D; 0; i &lt; 6; i ++ ) q[op[x][i]] &#x3D; q[op[x][i + 1]];
    q[op[x][6]] &#x3D; t;
&#125;

bool dfs(int depth, int max_depth, int last) &#x2F;&#x2F;当前深度，最大深度，上个操作
&#123;
    if (depth + f() &gt; max_depth) return false;
    if (f() &#x3D;&#x3D; 0) return true;

    for (int i &#x3D; 0; i &lt; 8; i ++ )
        if (last !&#x3D; oppsite[i])
        &#123;
            operate(i);
            path[depth] &#x3D; i;
            if (dfs(depth + 1, max_depth, i)) return true;
            operate(oppsite[i]);
        &#125;

    return false;
&#125;

int main()
&#123;
    while (cin &gt;&gt; q[0], q[0])
    &#123;
        for (int i &#x3D; 1; i &lt; 24; i ++ ) cin &gt;&gt; q[i];

        int depth &#x3D; 0;
        while (!dfs(0, depth, -1)) depth ++ ;

        if (!depth) printf(&quot;No moves needed&quot;);
        else
        &#123;
            for (int i &#x3D; 0; i &lt; depth; i ++ ) printf(&quot;%c&quot;, &#39;A&#39; + path[i]);
        &#125;
        printf(&quot;\n%d\n&quot;, q[6]);
    &#125;

    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="提高课（图论）"><a href="#提高课（图论）" class="headerlink" title="提高课（图论）"></a>提高课（图论）</h1><h2 id="单源最短路的建图方式"><a href="#单源最短路的建图方式" class="headerlink" title="单源最短路的建图方式"></a>单源最短路的建图方式</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1131/">热浪</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 2510, M &#x3D; 2*6210;
int n,m,ts,te;
int idx,e[M],ne[M],w[M],h[N];
int d[N];
bool st[N];

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b,w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

int dijkstra()
&#123;
    memset(d, 0x3f, sizeof d);
    d[ts] &#x3D; 0;
    priority_queue&lt;PII, vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0,ts&#125;);
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis + w[i])&#123;
                d[j] &#x3D; dis + w[i];
                heap.push(&#123;d[j], j&#125;);
            &#125;
        &#125;
    &#125;
    
    return d[te];
&#125;

int main()
&#123;
    memset(h, -1,sizeof h);
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; ts &gt;&gt; te;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a,b,c);
        add(b,a,c);
    &#125;
    
    int t &#x3D; dijkstra();
    cout &lt;&lt; t &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1130/">信使</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 110, M &#x3D; 210 * 2;
int idx,e[M],ne[M],w[M],h[N];
int n,m;
bool st[N];
int d[N];

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c,ne[idx] &#x3D; h[a], h[a] &#x3D; idx++;
&#125;

int dijkstra()&#123;
    memset(d, 0x3f, sizeof d);
    d[1] &#x3D; 0;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0, 1&#125;);
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1 ; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis + w[i])&#123;
                d[j] &#x3D; dis + w[i];
                heap.push(&#123;d[j], j&#125;);
            &#125;
        &#125;
    &#125;
    int res;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )&#123;
        if(d[i] &gt; 0x3f3f3f3f &#x2F;2 ) return -1;
        res &#x3D; max(res, d[i]);
    &#125;
    return res;
&#125;

int main()
&#123;
    memset(h, -1,sizeof h);
    cin &gt;&gt; n &gt;&gt; m ;
    for(int i &#x3D; 0 ; i &lt;m ; i ++ )&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
        add(b, a, c);
    &#125;
    
    int t &#x3D; dijkstra();
    cout &lt;&lt; t &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1129/">香甜的黄油</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 810, M &#x3D; 1460 * 2;
int n,p,c;
int idx,e[M],ne[M],w[M],h[N];
bool st[N];
int d[N];
int num[N];

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx++;
&#125;

int dijkstra(int s)&#123;
    
    memset(st, false, sizeof st);
    memset(d, 0x3f, sizeof d);
    d[s] &#x3D; 0;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0,s&#125;);
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis + w[i]) &#123;
                d[j] &#x3D; dis + w[i];
                heap.push(&#123;d[j], j&#125;);
            &#125;
        &#125;
    &#125;
    int ans &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++  )&#123;
        if(d[num[i]] &gt; 0x3f3f3f3f &#x2F;2 ) return 0x3f3f3f3f;
        ans +&#x3D; d[num[i]];
    &#125;

    return ans;
&#125;

int main()&#123;
    memset(h, -1,sizeof h);
    cin &gt;&gt; n &gt;&gt; p &gt;&gt; c;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; num[i];
    for(int i &#x3D; 0 ; i &lt; c ; i ++ )&#123;
        int x,y,z;
        cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        add(x,y,z);
        add(y,x,z);
    &#125;
    int res &#x3D; 0x3f3f3f3f;
    for(int i &#x3D; 1;  i &lt;&#x3D; p ; i ++ )  res &#x3D; min(res,dijkstra(i));
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1128/">最小花费</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
using namespace std;
typedef pair&lt;double,int&gt; PII;
const int N  &#x3D; 2010, M &#x3D; 1e5 * 2 + 10;
int idx,e[M], ne[M], w[M], h[N];
int n, m, A, B;
bool st[N];
double d[N];

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b ,w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx++ ;
&#125; 

double dijkstra()&#123;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ;  i++ ) d[i] &#x3D; 0x3f3f3f3f;
    d[B] &#x3D; 100;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;100,B&#125;);
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second;
        double dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        for(int i &#x3D; h[ver]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis  * 100 &#x2F;(100 - w[i]))&#123;
                d[j] &#x3D; dis * 100 &#x2F;(100 - w[i]);
                heap.push(&#123;d[j], j&#125;);
            &#125;
        &#125;
    &#125;
    
    return d[A];
&#125;

int main()&#123;
    cin &gt;&gt; n &gt;&gt; m;
    memset(h ,-1, sizeof h);
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )&#123;
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(b, a, c);
        add(a, b, c);
    &#125;
    cin &gt;&gt; A &gt;&gt; B;
    double t &#x3D; dijkstra();
    printf(&quot;%.8lf\n&quot;, t);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/922/">最优方案</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;sstream&gt;
#include&lt;queue&gt;
using namespace std;
const int N &#x3D; 510, M &#x3D; 110;

int n,m;
bool g[N][N];
int d[N];
bool st[N];
int stop[N];

void bfs()&#123;
    memset(d, 0x3f, sizeof d);
    queue&lt;int&gt; q;
    q.push(1);
    d[1] &#x3D; 0 ;
    while(!q.empty())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++)&#123;
            if(g[t][i] &amp;&amp; d[i] &gt; d[t] + 1)&#123;
                d[i] &#x3D; d[t] + 1;
                q.push(i);
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; m &gt;&gt; n ;
    string line;
    getline(cin,line); &#x2F;&#x2F;读入换行符
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )&#123;
        getline(cin ,line);
        stringstream ssin(line);
        int cnt &#x3D; 0, p ;
        while(ssin &gt;&gt; p ) stop[cnt ++ ] &#x3D; p;
        for(int j &#x3D; 0 ; j &lt; cnt ; j ++ )&#123;
            for(int k &#x3D; j + 1 ; k &lt; cnt ; k ++ )&#123;
                g[stop[j]][stop[k]] &#x3D; true;
            &#125;
        &#125;
    &#125;
    
    bfs();
    
    if (d[n] &#x3D;&#x3D; 0x3f3f3f3f) puts(&quot;NO&quot;);
    else cout &lt;&lt; max(d[n] - 1,0) &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/905/">昂贵的聘礼</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305022108097.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N &#x3D; 110, INF &#x3D; 0x3f3f3f3f;
int m,n;
int g[N][N];
int d[N];
int level[N];
bool st[N];

int dijkstra(int lmin, int lmax)&#123;
    memset(d, 0x3f, sizeof d);
    memset(st, false,sizeof st);
    d[0] &#x3D; 0;
    for(int i &#x3D; 0; i &lt; n ; i ++ )&#123;
        int t &#x3D; -1;
        for(int j &#x3D; 0 ; j &lt;&#x3D; n ; j ++ )&#123;
            if(!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || d[t] &gt; d[j]))
                t &#x3D; j;
        &#125;
        
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )&#123;
            if(level[j] &gt;&#x3D; lmin &amp;&amp; level[j] &lt;&#x3D; lmax)&#123;
                d[j] &#x3D; min(d[j], d[t] + g[t][j]);
            &#125;
        &#125;
        st[t] &#x3D; true;
    &#125;
    
    return d[1];
&#125;

int main()&#123;
    memset(g, 0x3f, sizeof g);
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ;i ++ )&#123;
        g[i][i] &#x3D; 0;
    &#125;
    cin &gt;&gt; m &gt;&gt; n;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )&#123;
        int p, l, x ;
        cin &gt;&gt; p &gt;&gt; l &gt;&gt; x;
        g[0][i] &#x3D; p;
        level[i] &#x3D; l;
        while(x -- )&#123;
            int t, v;
            cin &gt;&gt; t &gt;&gt; v;
            g[t][i] &#x3D; v;
        &#125;
    &#125;
    int res &#x3D; INF;
    for(int i &#x3D; level[1] - m ; i &lt;&#x3D; level[1] ; i ++ ) res &#x3D; min(res, dijkstra(i, i + m));
    
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="单源最短路的综合应用"><a href="#单源最短路的综合应用" class="headerlink" title="单源最短路的综合应用"></a>单源最短路的综合应用</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1137/">新年好</a></p>
<p>单源最短路+dfs暴搜</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 50010, M &#x3D; 1e5 * 2 + 10, INF &#x3D; 0x3f3f3f3f;
int idx, e[M], ne[M], w[M], h[N];
int n,m;
bool st[N];
int d[6][N];
int source[6];

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

void dijkstra(int start, int dist[])&#123;
    memset(st, false, sizeof st);
    memset(dist, 0x3f, N * 4);
    priority_queue&lt;PII,vector&lt;PII&gt;, greater&lt;PII&gt;&gt; heap;
    heap.push(&#123;0,start&#125;);
    dist[start] &#x3D; 0;
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver] ; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(dist[j] &gt; dis + w[i])&#123;
                dist[j] &#x3D; dis + w[i];
                heap.push(&#123;dist[j], j&#125;);
            &#125;
        &#125;
    &#125;
&#125;

&#x2F;&#x2F;u:枚举到第几个亲戚,start:从哪个亲戚出发,dis:当前的距离
int dfs(int u,int start,int dis)&#123;
    if(u &#x3D;&#x3D; 6) return dis;
    
    int res &#x3D; INF;
    for(int i &#x3D; 1; i &lt;&#x3D; 5 ; i++)&#123;
        if(!st[i])&#123;
            int next &#x3D; source[i];
            st[i] &#x3D; true;
            res &#x3D; min(res,  dfs(u + 1, i, dis + d[start][next]));
            st[i] &#x3D; false;
        &#125;
    &#125;
    
    return res;
&#125;


int main()&#123;
    cin &gt;&gt; n &gt;&gt; m ;
    memset(h ,-1,sizeof h);
    source[0] &#x3D; 1;
    for(int i &#x3D; 1 ; i &lt;&#x3D; 5 ;  i++ ) cin &gt;&gt; source[i];
    for(int i &#x3D; 0 ; i &lt; m ; i ++ ) &#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
        add(b, a, c);
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; 6 ; i ++) dijkstra(source[i], d[i]);
    
    memset(st, false ,sizeof st);
    int res &#x3D; dfs(1, 0, 0);
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/342/">通信线路</a><br>双端队列广搜+二分</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305022154140.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305022155649.png" alt="image-20230502215526896"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;deque&gt;

using namespace std;
const int N &#x3D; 1010, M &#x3D; 20010;
int n,m,k;
int idx, e[M], ne[M], w[M], h[N];
int d[N];
bool st[N];
deque&lt;int&gt; q;

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx]&#x3D; c, ne[idx]&#x3D; h[a], h[a] &#x3D; idx ++;
&#125;

bool check(int bound)
&#123;
    &#x2F;&#x2F;求最小的这样一个x，使得大于等于x的边的数量&lt;&#x3D;k
    &#x2F;&#x2F;双端队列广搜求大于等于x的边的数量
    memset(st, 0, sizeof st);
    memset(d, 0x3f, sizeof d);
    d[1] &#x3D; 0;
    q.push_back(1);
    
    while(q.size())&#123;
        auto t &#x3D; q.front();
        q.pop_front();
        
        if(st[t]) continue;
        st[t] &#x3D; true;
        
        for(int i &#x3D; h[t]; i !&#x3D; -1; i &#x3D; ne[i]) &#123;
            int j &#x3D; e[i], x &#x3D; w[i] &gt; bound;
            if(d[j] &gt; d[t] + x)&#123;
                d[j] &#x3D; d[t] + x;
                if(x) q.push_back(j);
                else q.push_front(j);
            &#125;
        &#125;
    &#125;
    
    return d[n] &lt;&#x3D; k;
&#125;

int main()&#123;
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;
    memset(h, -1, sizeof h);
    for(int i &#x3D; 0 ;i &lt; m ;i ++ )&#123;
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
        add(b, a, c);
    &#125;
    
    int l &#x3D; 0, r &#x3D; 1e6 +1  ;
    while(l &lt; r)&#123;
        int mid &#x3D; l + r &gt;&gt; 1;
        if(check(mid)) r &#x3D; mid;
        else l &#x3D; mid + 1;
    &#125;
    
    if (r &#x3D;&#x3D; 1e6 + 1) cout &lt;&lt; -1 &lt;&lt; endl;
    else cout &lt;&lt; r &lt;&lt; endl;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/344/">道路与航线</a></p>
<p>dfs + 拓扑 + 最短路</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305042104519.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305042055061.png" alt="image-20230504205514350"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305042107887.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;
#include&lt;vector&gt;
using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 25010, M &#x3D; 150010, INF &#x3D; 0x3f3f3f3f;

int n, mr, mp, S, bnt;
int idx, e[M], ne[M], w[M], h[N];
bool st[N];
int d[N];
int id[N];
int din[N];
vector&lt;int&gt; block[N];
queue&lt;int&gt; q;

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

void dfs(int u,int bid)&#123;
    block[bid].push_back(u);
    id[u] &#x3D; bid;
    
    for(int i &#x3D; h[u]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
        int j &#x3D; e[i];
        if(!id[j])&#123;
            dfs(j, bid);
        &#125;
    &#125;
&#125;

void dijkstra(int bid)&#123;
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    for(auto it : block[bid])&#123;
        heap.push(&#123;d[it], it&#125;);
    &#125;
    
    while(heap.size())&#123;
        auto t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i!&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis + w[i])&#123;
                d[j] &#x3D; dis + w[i];
                if(id[j] &#x3D;&#x3D; id[ver]) heap.push(&#123;d[j], j&#125;);
            &#125;
            
            if(id[ver] !&#x3D; id[j] &amp;&amp; --din[id[j]] &#x3D;&#x3D; 0) q.push(id[j]);
        &#125;
    &#125;
&#125;

void topsort()&#123;
    memset(d, 0x3f, sizeof d);
    d[S] &#x3D; 0 ;
    
    for(int i &#x3D; 1 ; i &lt;&#x3D; bnt ; i ++)&#123;
        if(!din[i])&#123;
            q.push(i);
        &#125;
    &#125;
    
    while(q.size())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        dijkstra(t);
    &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; mr &gt;&gt; mp &gt;&gt; S;
    memset(h, -1, sizeof h);
    for(int i &#x3D; 0 ; i &lt; mr ; i ++ ) &#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c), add(b, a, c);
    &#125;
    
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++) &#123;
        if(!id[i])&#123;
            dfs(i, ++ bnt);
        &#125;
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; mp ; i ++) &#123;
        int a,b,c;
        cin &gt;&gt; a&gt;&gt; b &gt;&gt; c;
        add(a, b, c);
        din[id[b]] ++ ;
    &#125;
    
    topsort();
    
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )&#123;
        if(d[i] &gt; INF &#x2F; 2) cout &lt;&lt; &quot;NO PATH&quot; &lt;&lt; endl;
        else cout &lt;&lt; d[i] &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/343/">最优贸易</a>（未做）</p>
<p>dp + 最短路</p>
<p>先求出：</p>
<ul>
<li>从 1走到 i 的过程中，买入水晶球的最低价格 dmin[i]；</li>
<li>从 i 走到 n 的过程中，卖出水晶球的最高价格 dmax[i]；</li>
</ul>
<p>然后枚举每个城市作为买卖的中间城市，求出 dmax[i] - dmin[i] 的最大值即可。</p>
<p>求 dmin[i] 和 dmax[i] 时，由于不是拓扑图，状态的更新可能存在环，因此不能使用动态规划，只能使用求最短路的方式。</p>
<blockquote>
<p>不能用dijsktra算法的原因：</p>
<p>最一般的最短路维护的是路径上的sum性质，本题维护的是max和min性质，sum性质具有累加性（就是要从前面的值基础上累加，后续出现只会越来越大，所以第一次出现的就是最短），而max 和min对于新出现的数，单独比较即可，所以不能用dijkstra（dijkstra就是利用的sum的累加性）</p>
<p>总的来说就是max和min，后面出现的数不一定比前面的数都差（而dijkstra的sum性质能保证后面出现的数都比前面的数都差）</p>
</blockquote>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;

using namespace std;

const int N &#x3D; 100010, M &#x3D; 2000010;

int n, m;
int price[N];
int h[N], rh[N], e[M], ne[M], idx;
int dmin[N], dmax[N];
bool st[N];

void add(int *h, int a, int b)
&#123;
    e[idx] &#x3D; b, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

void spfa(int *d, int start, int *h, bool flag)
&#123;
    queue&lt;int&gt; q;
    memset(st, 0, sizeof st);

    if (flag) memset(d, 0x3f, sizeof dmin);

    q.push(start);
    st[start] &#x3D; true;
    d[start] &#x3D; price[start];

    while (q.size())
    &#123;
        int t &#x3D; q.front();
        q.pop();
        st[t] &#x3D; false;

        for (int i &#x3D; h[t]; ~i; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if (flag &amp;&amp; d[j] &gt; min(d[t], price[j]) || !flag &amp;&amp; d[j] &lt; max(d[t], price[j]))
            &#123;
                if (flag) d[j] &#x3D; min(d[t], price[j]);
                else d[j] &#x3D; max(d[t], price[j]);

                if (!st[j])
                &#123;
                    st[j] &#x3D; true;
                    q.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    scanf(&quot;%d%d&quot;, &amp;n, &amp;m);

    memset(h, -1, sizeof h);
    memset(rh, -1, sizeof rh);

    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ ) scanf(&quot;%d&quot;, &amp;price[i]);
    while (m -- )
    &#123;
        int a, b, c;
        scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c);
        add(h, a, b), add(rh, b, a);
        if (c &#x3D;&#x3D; 2) add(h, b, a), add(rh, a, b);
    &#125;

    spfa(dmin, 1, h, true);
    spfa(dmax, n, rh, false);

    int res &#x3D; 0;
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ ) res &#x3D; max(res, dmax[i] - dmin[i]);

    printf(&quot;%d\n&quot;, res);

    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="单源最短路的扩展方式"><a href="#单源最短路的扩展方式" class="headerlink" title="单源最短路的扩展方式"></a>单源最短路的扩展方式</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1139/">选择最佳线路</a></p>
<p>虚拟源点</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305052121234.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 1010, M &#x3D; 30010, INF &#x3D; 0x3f3f3f3f;

int n,m,s;
int idx, e[M], ne[M], w[M], h[N];
bool st[N];
int d[N];
int cnt;

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

int dijkstra()&#123;
    memset(d, 0x3f, sizeof d);
    memset(st, false, sizeof st);
    priority_queue&lt;PII,vector&lt;PII&gt;,greater&lt;PII&gt;&gt; heap;
    d[0] &#x3D; 0;
    heap.push(&#123;0, 0&#125;);
    
    while(heap.size())
    &#123;
        auto t &#x3D; heap.top();
        heap.pop();
        int ver &#x3D; t.second, dis &#x3D; t.first;
        if(st[ver]) continue;
        st[ver] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; dis + w[i])&#123;
                d[j] &#x3D; dis + w[i];
                heap.push(&#123;d[j], j&#125;);
            &#125;
        &#125;
    &#125;
    
    if(d[s] &gt; INF &#x2F; 2) return -1;
    
    return d[s];
&#125;

int main()
&#123;
    while(cin &gt;&gt; n &gt;&gt; m &gt;&gt; s)&#123;
        memset(h, -1, sizeof h);
        idx &#x3D; 0;
        for(int i &#x3D; 0 ; i &lt; m ; i ++ )&#123;
            int a,b,c;
            cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
            add(a, b, c);
        &#125;
        cin &gt;&gt; cnt ;
        for(int i &#x3D; 0; i &lt; cnt ; i ++ )&#123;
            int p;
            cin &gt;&gt; p;
            add(0, p, 0);
        &#125;
        int t &#x3D; dijkstra();
        cout &lt;&lt; t &lt;&lt; endl;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1133/">拯救大兵瑞恩</a>（未做）</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305052158853.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;deque&gt;
#include &lt;set&gt;

#define x first
#define y second

using namespace std;

typedef pair&lt;int, int&gt; PII;

const int N &#x3D; 11, M &#x3D; 360, P &#x3D; 1 &lt;&lt; 10;

int n, m, k, p;
int h[N * N], e[M], w[M], ne[M], idx;
int g[N][N], key[N * N];
int dist[N * N][P];
bool st[N * N][P];

set&lt;PII&gt; edges;

void add(int a, int b, int c)
&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

void build()
&#123;
    int dx[4] &#x3D; &#123;-1, 0, 1, 0&#125;, dy[4] &#x3D; &#123;0, 1, 0, -1&#125;;
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
        for (int j &#x3D; 1; j &lt;&#x3D; m; j ++ )
            for (int u &#x3D; 0; u &lt; 4; u ++ )
            &#123;
                int x &#x3D; i + dx[u], y &#x3D; j + dy[u];
                if (!x || x &gt; n || !y || y &gt; m) continue;
                int a &#x3D; g[i][j], b &#x3D; g[x][y];
                if (!edges.count(&#123;a, b&#125;)) add(a, b, 0);
            &#125;
&#125;

int bfs()
&#123;
    memset(dist, 0x3f, sizeof dist);
    dist[1][0] &#x3D; 0;

    deque&lt;PII&gt; q;
    q.push_back(&#123;1, 0&#125;);

    while (q.size())
    &#123;
        PII t &#x3D; q.front();
        q.pop_front();

        if (st[t.x][t.y]) continue;
        st[t.x][t.y] &#x3D; true;

        if (t.x &#x3D;&#x3D; n * m) return dist[t.x][t.y];

        if (key[t.x])
        &#123;
            int state &#x3D; t.y | key[t.x];
            if (dist[t.x][state] &gt; dist[t.x][t.y])
            &#123;
                dist[t.x][state] &#x3D; dist[t.x][t.y];
                q.push_front(&#123;t.x, state&#125;);
            &#125;
        &#125;

        for (int i &#x3D; h[t.x]; ~i; i &#x3D; ne[i])
        &#123;
            int j &#x3D; e[i];
            if (w[i] &amp;&amp; !(t.y &gt;&gt; w[i] - 1 &amp; 1)) continue;   &#x2F;&#x2F; 有门并且没有钥匙
            if (dist[j][t.y] &gt; dist[t.x][t.y] + 1)
            &#123;
                dist[j][t.y] &#x3D; dist[t.x][t.y] + 1;
                q.push_back(&#123;j, t.y&#125;);
            &#125;
        &#125;
    &#125;

    return -1;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; p &gt;&gt; k;

    for (int i &#x3D; 1, t &#x3D; 1; i &lt;&#x3D; n; i ++ )
        for (int j &#x3D; 1; j &lt;&#x3D; m; j ++ )
            g[i][j] &#x3D; t ++ ;

    memset(h, -1, sizeof h);
    while (k -- )
    &#123;
        int x1, y1, x2, y2, c;
        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; c;
        int a &#x3D; g[x1][y1], b &#x3D; g[x2][y2];

        edges.insert(&#123;a, b&#125;), edges.insert(&#123;b, a&#125;);
        if (c) add(a, b, c), add(b, a, c);
    &#125;

    build();

    int s;
    cin &gt;&gt; s;
    while (s -- )
    &#123;
        int x, y, c;
        cin &gt;&gt; x &gt;&gt; y &gt;&gt; c;
        key[g[x][y]] |&#x3D; 1 &lt;&lt; c - 1;
    &#125;

    cout &lt;&lt; bfs() &lt;&lt; endl;

    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1136/">最短路计数</a></p>
<p>最短路的条数</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305062238582.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;queue&gt;
using namespace std;
const int N &#x3D; 1e5 + 10, M &#x3D; 4e5 + 10, MOD &#x3D; 100003;

int n,m;
int idx, e[M], ne[M], h[N];
int d[N];
int cnt[N];

void add(int a,int b)&#123;
    e[idx] &#x3D; b, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

void bfs()
&#123;
    memset(d, 0x3f, sizeof d);
    queue&lt;int&gt; q;
    q.push(1);
    d[1] &#x3D; 0;
    cnt[1] &#x3D; 1;
    
    while(q.size())&#123;
        auto t &#x3D; q.front();
        q.pop();
        
        for(int i &#x3D; h[t]; i !&#x3D; -1; i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j] &gt; d[t] + 1)&#123;
                d[j] &#x3D; d[t] + 1;
                cnt[j] &#x3D; cnt[t];
                q.push(j);
            &#125;
            else if(d[j] &#x3D;&#x3D; d[t] + 1)&#123;
                cnt[j] &#x3D; (cnt[t] + cnt[j]) % MOD;
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    memset(h , -1, sizeof h);
    cin &gt;&gt; n &gt;&gt; m ;
    for(int i &#x3D; 0; i &lt; m ; i ++ )&#123;
        int a,b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a, b), add(b, a);
    &#125;
    
    bfs();
    
    for(int i &#x3D; 1; i &lt;&#x3D; n ; i ++ ) cout &lt;&lt; cnt[i] &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/385/">观光</a></p>
<p>最短路径的条数</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;queue&gt;

using namespace std;
const int N &#x3D; 1010, M &#x3D; 10010;
int n,m,S,F;
int idx, e[M], ne[M], h[N], w[M];
int d[N][2];
bool st[N][2];
int cnt[N][2];

struct Ver &#123;
    int ver, type, dist; &#x2F;&#x2F;0:最短路，1:次短路
    &#x2F;&#x2F;小根堆重载大于号
    bool operator&gt; (const Ver &amp;W) const&#123;
        return dist &gt; W.dist;
    &#125;
&#125;;

void add(int a,int b,int c)&#123;
    e[idx] &#x3D; b, w[idx] &#x3D; c, ne[idx] &#x3D; h[a], h[a] &#x3D; idx ++ ;
&#125;

int dijkstra()&#123;
    memset(st, 0, sizeof st);
    memset(d, 0x3f, sizeof d);
    memset(cnt, 0, sizeof cnt);
    
    d[S][0] &#x3D; 0, cnt[S][0] &#x3D; 1;
    priority_queue&lt;Ver, vector&lt;Ver&gt;, greater&lt;Ver&gt;&gt; heap;
    heap.push(&#123;S, 0, 0&#125;);
    
    while(heap.size())&#123;
        Ver t &#x3D; heap.top();
        heap.pop();
        
        int ver &#x3D; t.ver, type &#x3D; t.type, dis &#x3D; t.dist, count &#x3D; cnt[ver][type];
        if(st[ver][type]) continue;
        st[ver][type] &#x3D; true;
        
        for(int i &#x3D; h[ver]; i !&#x3D; -1 ;i &#x3D; ne[i])&#123;
            int j &#x3D; e[i];
            if(d[j][0] &gt; dis + w[i])&#123;
                &#x2F;&#x2F;最短路变为次短路
                d[j][1] &#x3D; d[j][0];
                cnt[j][1] &#x3D; cnt[j][0];
                heap.push(&#123;j, 1, d[j][1]&#125;);
                &#x2F;&#x2F;更新最短路
                d[j][0] &#x3D; dis + w[i];
                cnt[j][0] &#x3D; count;
                heap.push(&#123;j, 0, d[j][0]&#125;);
            &#125;
            else if(d[j][0] &#x3D;&#x3D; dis + w[i])&#123;
                cnt[j][0] +&#x3D; count;
            &#125;else if(d[j][1] &gt; dis + w[i])&#123;
                &#x2F;&#x2F;更新次短路
                d[j][1] &#x3D; dis + w[i];
                cnt[j][1] &#x3D; count;
                heap.push(&#123;j, 1, d[j][1]&#125;);
            &#125;else if(d[j][1] &#x3D;&#x3D; dis + w[i])&#123;
                cnt[j][1] +&#x3D; count;
            &#125;
        &#125;
    &#125;
    
    int res &#x3D; cnt[F][0];
    if(d[F][0] + 1 &#x3D;&#x3D; d[F][1]) res +&#x3D; cnt[F][1];
    
    return res;
&#125;

int main()&#123;
    int cases;
    cin &gt;&gt; cases;
    while(cases--)&#123;
        memset(h , -1, sizeof h);
        idx &#x3D; 0;
        cin &gt;&gt; n &gt;&gt; m ;
        for(int i &#x3D; 0; i &lt; m ; i++ )&#123;
            int a,b,c;
            cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
            add(a, b, c);
        &#125;
        
        cin &gt;&gt; S &gt;&gt; F;
        cout &lt;&lt; dijkstra() &lt;&lt; endl;
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Floyd算法"><a href="#Floyd算法" class="headerlink" title="Floyd算法"></a>Floyd算法</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1127/">牛的旅行</a></p>
<p>最短路</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305082110528.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305082110502.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#define  x first
#define  y second

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 160;
const double INF &#x3D; 1e20;

int n;
double d[N][N];
PII q[N];
char g[N][N];
double maxd[N];

double get_dist(PII p1, PII p2)&#123;
    int dx &#x3D; p1.x - p2.x, dy &#x3D; p1.y - p2.y;
    return sqrt(dx * dx + dy * dy);
&#125;


void floyd()&#123;
    for(int k &#x3D; 0; k &lt; n ; k ++ )&#123;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
            for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
                d[i][j] &#x3D; min(d[i][j], d[i][k] + d[k][j]);
            &#125;
        &#125;
    &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; n;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; q[i].x &gt;&gt; q[i].y;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cin &gt;&gt; g[i];
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; n ; j ++)&#123;
            if(i !&#x3D; j)&#123;
                if(g[i][j] &#x3D;&#x3D; &#39;1&#39;) d[i][j] &#x3D; get_dist(q[i], q[j]);
                else d[i][j] &#x3D; INF;
            &#125;
        &#125;
    &#125;
    
    floyd();
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
            if(d[i][j] &lt; INF&#x2F; 2)&#123;
              maxd[i] &#x3D; max(maxd[i], d[i][j]) ;  
            &#125;
        &#125;
    &#125;
    
    double res1 &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) res1 &#x3D; max(res1, maxd[i]);
    double res2 &#x3D; INF;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
            if(d[i][j] &gt;&#x3D; INF)&#123;
                res2 &#x3D; min(res2, maxd[i] + get_dist(q[i], q[j]) + maxd[j]);
            &#125;
        &#125;
    &#125;
    printf(&quot;%.6lf\n&quot;, max(res1, res2));
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/345/">排序</a></p>
<p>传递闭包</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305082223854.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305082224447.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;
const int N &#x3D; 26;
int n,m;
bool g[N][N], d[N][N];
bool st[N]; &#x2F;&#x2F;存储当前变量有没有被输出

void floyd()&#123;
    memcpy(d, g,sizeof d);
    for(int k &#x3D; 0 ; k &lt; n ; k ++ )&#123;
        for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
            for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
                &#x2F;&#x2F;若i&lt;k,且k&lt;j，则存在i&lt;j
                d[i][j] |&#x3D; d[i][k] &amp;&amp; d[k][j];
            &#125;
        &#125;
    &#125;
&#125;

int check()&#123;
    for(int i &#x3D; 0; i &lt; n ; i ++ )&#123;
        if(d[i][i])
        &#x2F;&#x2F;i &lt; i矛盾
            return 2;
    &#125;
    
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )&#123;
        for(int j &#x3D; 0 ; j &lt; i ; j ++ )&#123;
            &#x2F;&#x2F; i与j之间没有关系
            if(!d[i][j] &amp;&amp; !d[j][i]) &#123;
                return 0;
            &#125;
        &#125;
    &#125;
    
    return 1;
&#125;

char get_min()
&#123;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
    &#123;
        if(!st[i])
        &#123;
            bool flag &#x3D; true;
            &#x2F;&#x2F;找到是否比i小的点
            for(int j &#x3D; 0 ; j &lt; n ; j ++ )&#123;
                if(!st[j] &amp;&amp; d[j][i])&#123;
                    flag &#x3D; false;
                    break;
                &#125;
            &#125;
            &#x2F;&#x2F;没有比i小的
            if(flag)
            &#123;
                st[i] &#x3D; true;
                return  &#39;A&#39; + i;
            &#125;
        &#125;
    &#125;
&#125;
int main()
&#123;
    while(cin &gt;&gt; n &gt;&gt; m , n || m)&#123;
        memset(g, 0, sizeof g);
        int type &#x3D; 0; &#x2F;&#x2F; 0:不确定 1:唯一确定 2:矛盾
        int t; &#x2F;&#x2F;每个结果对应的轮数
        for(int i &#x3D; 1; i &lt;&#x3D; m ; i ++ )&#123;
            char str[5];
            cin &gt;&gt; str;
            int a &#x3D; str[0] - &#39;A&#39;, b &#x3D; str[2] - &#39;A&#39;;
            if(!type)&#123;
                g[a][b] &#x3D; 1;
                floyd();
                type &#x3D; check();
                if(type) t &#x3D; i;
            &#125;
        &#125;
        
        if(!type) puts(&quot;Sorted sequence cannot be determined.&quot;);
        else if(type &#x3D;&#x3D; 2) printf(&quot;Inconsistency found after %d relations.\n&quot;, t);
        else&#123;
            memset(st, 0, sizeof st);
            printf(&quot;Sorted sequence determined after %d relations: &quot;, t);
            for(int i &#x3D; 0 ; i &lt; n ; i ++ ) cout &lt;&lt; get_min();  &#x2F;&#x2F;每次输出最小值
            printf(&quot;.\n&quot;);
        &#125;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/346/">观光之旅</a></p>
<p>求最小环</p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305092127613.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 110, INF &#x3D; 0x3f3f3f3f;

int n, m;
int d[N][N], g[N][N]; 
int pos[N][N]; &#x2F;&#x2F;i到j是由哪个点转移的
int path[N]; &#x2F;&#x2F;存储路径
int cnt;&#x2F;&#x2F;路径长度

void get_path(int i,int j)&#123;
    if(pos[i][j] &#x3D;&#x3D; 0) return ;
    
    int k &#x3D; pos[i][j];
    get_path(i, k);
    path[cnt++] &#x3D; k;
    get_path(k, j);
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m ;
    memset(g, 0x3f, sizeof g);
    for(int i &#x3D; 0 ; i &lt;&#x3D; n ; i ++ ) g[i][i] &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; m ; i++ )&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        g[a][b] &#x3D; g[b][a] &#x3D; min(g[a][b], c);
    &#125;
    
    int res &#x3D; INF;
    memcpy(d, g, sizeof d);
    for(int k &#x3D; 1; k &lt;&#x3D; n ; k ++ )&#123;
        for(int i &#x3D; 1; i &lt;&#x3D; k ; i ++ )&#123;
            for(int j &#x3D; i + 1 ; j &lt; k ; j ++ )&#123;
                if((long long)d[i][j] + g[i][k] + g[k][j] &lt; res) &#123;
                    res &#x3D; d[i][j] + g[i][k] + g[k][j];
                    cnt &#x3D; 0;
                    path[cnt++] &#x3D; k;
                    path[cnt++] &#x3D; i;
                    get_path(i, j);
                    path[cnt++] &#x3D; j;
                &#125;
            &#125;
        &#125;
        
        for(int i &#x3D; 1 ; i &lt;&#x3D; n  ; i ++ )&#123;
            for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )&#123;
                if(d[i][j] &gt; d[i][k] + d[k][j])&#123;
                    d[i][j] &#x3D; d[i][k] + d[k][j];
                    pos[i][j] &#x3D; k;
                &#125;
            &#125;
        &#125;
    &#125;
    
    if(res &gt; INF &#x2F; 2) cout &lt;&lt; &quot;No solution.&quot; &lt;&lt; endl;
    else &#123;
        for(int i &#x3D; 0 ;i &lt; cnt; i ++ ) cout &lt;&lt; path[i] &lt;&lt; &#39; &#39;;
    &#125;
    
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/347/">牛站</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305092203879.png"></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305092203898.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;

using namespace std;

const int N &#x3D; 210;

int k, n, m, S, E;
int g[N][N];
int res[N][N];

void mul(int c[][N], int a[][N], int b[][N])
&#123;
    static int temp[N][N];
    memset(temp, 0x3f, sizeof temp);
    for (int k &#x3D; 1; k &lt;&#x3D; n; k ++ )
        for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ )
            for (int j &#x3D; 1; j &lt;&#x3D; n; j ++ )
                temp[i][j] &#x3D; min(temp[i][j], a[i][k] + b[k][j]);
    memcpy(c, temp, sizeof temp);
&#125;

void qmi()
&#123;
    memset(res, 0x3f, sizeof res);
    for (int i &#x3D; 1; i &lt;&#x3D; n; i ++ ) res[i][i] &#x3D; 0;

    while (k)
    &#123;
        if (k &amp; 1) mul(res, res, g);    &#x2F;&#x2F; res &#x3D; res * g
        mul(g, g, g);   &#x2F;&#x2F; g &#x3D; g * g
        k &gt;&gt;&#x3D; 1;
    &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; k &gt;&gt; m &gt;&gt; S &gt;&gt; E;

    memset(g, 0x3f, sizeof g);
    map&lt;int, int&gt; ids;
    if (!ids.count(S)) ids[S] &#x3D; ++ n;
    if (!ids.count(E)) ids[E] &#x3D; ++ n;
    S &#x3D; ids[S], E &#x3D; ids[E];

    while (m -- )
    &#123;
        int a, b, c;
        cin &gt;&gt; c &gt;&gt; a &gt;&gt; b;
        if (!ids.count(a)) ids[a] &#x3D; ++ n;
        if (!ids.count(b)) ids[b] &#x3D; ++ n;
        a &#x3D; ids[a], b &#x3D; ids[b];

        g[a][b] &#x3D; g[b][a] &#x3D; min(g[a][b], c);
    &#125;

    qmi();

    cout &lt;&lt; res[S][E] &lt;&lt; endl;

    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1142/">最短网络</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 110,INF &#x3D; 0x3f3f3f3f;
int n;
int g[N][N];
int d[N];
bool st[N];

int prim()
&#123;
    memset(d, 0x3f, sizeof d);
    int res &#x3D; 0;
    d[1] &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
    &#123;
        int t &#x3D; -1;
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            if(!st[j] &amp;&amp;(t &#x3D;&#x3D; -1 || d[t] &gt; d[j]))
            &#123;
                t &#x3D; j;
            &#125;
        &#125;
        
        if(i &amp;&amp; d[t] &#x3D;&#x3D; INF) return INF;
        if(i) res +&#x3D; d[t];
        
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ ) d[j] &#x3D; min(d[j], g[t][j]);
        st[t] &#x3D; true;
    &#125;
    
    return res;
&#125;

int main()
&#123;
    cin &gt;&gt; n ;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )
    &#123;
        for(int j &#x3D; 1 ; j &lt;&#x3D; n ; j ++ )
        &#123;
            cin &gt;&gt; g[i][j];
        &#125;
    &#125;
    
    int t &#x3D; prim();
    cout &lt;&lt; t &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1143/">局域网</a></p>
<p>最小生成森林：只能用kruscal</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;
const int N &#x3D; 110,M &#x3D; 210, INF &#x3D; 0x3f3f3f3f;
int n, m;
int p[N];
struct Edge&#123;
    int a, b, w;
    
    bool operator &lt;(const Edge &amp;W)const &#123;
        return w &lt; W.w;
    &#125;
&#125;edges[M];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m ;
    int sum &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a, b, w;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; w;
        edges[i].a &#x3D; a, edges[i].b &#x3D; b, edges[i].w &#x3D; w;
        sum +&#x3D; w;
    &#125;
    
    int res &#x3D; 0, cnt &#x3D; 0;
    
    sort(edges, edges + m);
    for(int i &#x3D; 1; i &lt;&#x3D; n ; i ++ ) p[i] &#x3D; i;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a &#x3D; edges[i].a, b &#x3D; edges[i].b, w &#x3D; edges[i]. w;
        a &#x3D; find(a), b &#x3D; find(b);
        if(a !&#x3D; b)
        &#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
            cnt ++ ;
        &#125;
    &#125;
    
    cout &lt;&lt; sum - res &lt;&lt; endl;;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1144/">繁忙的都市</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 310, M &#x3D; 8010, INF &#x3D; 0x3f3f3f3f;
int n, m;
int p[N];

struct Edge&#123;
    int a, b, w;
    bool operator&lt;(const Edge &amp;W) const &#123;
        return w &lt; W.w;
    &#125;
&#125;edges[M];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a, b, w;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; w;
        edges[i].a &#x3D; a, edges[i].b &#x3D; b, edges[i].w &#x3D; w;
    &#125;
    
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ ) p[i] &#x3D; i;
    sort(edges, edges + m);
    int res &#x3D; 0, cnt &#x3D; 0, medge &#x3D; 0 ;
    
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int a &#x3D; edges[i].a ,b &#x3D; edges[i].b, w &#x3D; edges[i].w;
        a &#x3D; find(a), b &#x3D; find(b);
        if(a !&#x3D; b)&#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
            medge &#x3D; max(medge, w);
            cnt ++;
        &#125;
    &#125;
    
    cout &lt;&lt; cnt &lt;&lt; &#39; &#39; &lt;&lt; medge &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/description/1145/">联络员</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 2010, M &#x3D; 10010, INF &#x3D; 0x3f3f3f3f;
struct Edge
&#123;
    int a, b, w;
    bool operator&lt;(const Edge&amp;W) const &#123;
         return w &lt; W.w;
    &#125;
&#125;edges[M];

int n, m;
int p[N];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i++ ) p[i] &#x3D; i;
    int res &#x3D; 0, cnt &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        int t, a, b, w;
        cin &gt;&gt; t &gt;&gt; a &gt;&gt; b &gt;&gt; w;
        if(t &#x3D;&#x3D; 1)
        &#123;
            p[find(a)] &#x3D; find(b);
            cnt ++ ;
            res +&#x3D; w;
        &#125;
        edges[i].a &#x3D; a;
        edges[i].b &#x3D; b;
        edges[i].w &#x3D; w; 
    &#125;
    
    
    sort(edges , edges + m);
    
    for(int i &#x3D; 0 ; i &lt; m ; i++ )
    &#123;
        int a &#x3D; edges[i].a, b &#x3D; edges[i].b, w &#x3D; edges[i].w;
        a &#x3D; find(a), b &#x3D; find(b);
        if(a !&#x3D; b)&#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
            cnt ++ ;
        &#125;
    &#125;
    
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1146/">连接格点</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 1010, M &#x3D; 10010, K &#x3D; N * N * 2, INF &#x3D; 0x3f3f3f3f ;

struct Edge&#123;
    int a, b, w;
&#125;edges[K];

int n, m, k;
int ids[N][N];
int p[K];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

void get_edges()
&#123;
    int dx[4] &#x3D; &#123;-1, 0, 1, 0&#125;, dy[4] &#x3D; &#123;0, 1, 0, -1&#125;, dw[4] &#x3D; &#123;1, 2, 1, 2&#125;; &#x2F;&#x2F;上、右，下，左
    for(int z &#x3D; 0 ; z &lt; 2 ; z ++ )
        for(int i &#x3D; 1; i &lt;&#x3D; n ; i ++ )
            for(int j &#x3D; 1 ; j &lt;&#x3D; m ; j ++ )
                for(int u &#x3D; 0 ; u &lt; 4 ; u ++ )
                    if(u % 2 &#x3D;&#x3D; z)
                    &#123;
                        int x &#x3D; i + dx[u], y &#x3D; j + dy[u], w &#x3D; dw[u];
                        if(x &amp;&amp; x &lt;&#x3D; n &amp;&amp; y &amp;&amp; y &lt;&#x3D; m)
                        &#123;
                            int a &#x3D; ids[i][j], b &#x3D; ids[x][y];
                            if(a &lt; b) edges[k ++] &#x3D; &#123;a, b, w&#125;;
                        &#125;
                    &#125;
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; m ;
    int t &#x3D; 1;
    for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ )&#123;
        for(int j &#x3D; 1 ; j &lt;&#x3D; m ; j ++ )
        &#123;
            ids[i][j] &#x3D; t++;
        &#125;
    &#125;
    
    for(int i &#x3D; 1; i &lt;&#x3D; t ; i ++ ) p[i] &#x3D; i;
    int x1, y1, x2, y2;
    while(cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2)
    &#123;
        int a &#x3D; ids[x1][y1], b &#x3D; ids[x2][y2];
        p[find(a)] &#x3D; find(b);
    &#125;
    
    get_edges();
    
    int res &#x3D; 0 ;
    for(int i &#x3D; 0 ; i &lt; k ;i ++ )
    &#123;
        int a &#x3D; find(edges[i].a), b &#x3D; find(edges[i].b), w &#x3D; edges[i].w;
        if(a !&#x3D; b)
        &#123;
            p[a] &#x3D; b;
            res +&#x3D; w;
        &#125;
    &#125;
    
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="最小生成树的扩展应用"><a href="#最小生成树的扩展应用" class="headerlink" title="最小生成树的扩展应用"></a>最小生成树的扩展应用</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/description/1148/">新的开始</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;
const int N &#x3D; 310, INF &#x3D; 0x3f3f3f3f;

int n;
int d[N];
int g[N][N];
bool st[N];

int prim()
&#123;
    memset(d, 0x3f, sizeof d);
    int res &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; n + 1 ; i ++ )
    &#123;
        int t &#x3D; -1;
        for(int j &#x3D; 0; j &lt; n + 1 ; j ++ )
            if(!st[j] &amp;&amp; (t &#x3D;&#x3D; -1 || d[j] &lt; d[t]))
                t &#x3D; j;
                
        if(i &amp;&amp; d[t] &#x3D;&#x3D; INF) return INF;
        if(i) res +&#x3D; d[t];
        for(int j &#x3D; 0 ; j &lt; n + 1; j ++ ) d[j] &#x3D; min(d[j], g[t][j]);
        st[t] &#x3D; true;
    &#125;
    
    return res;
&#125;

int main()
&#123;
    cin &gt;&gt; n ;
    memset(g, 0x3f, sizeof g);
    for(int i &#x3D; 1; i &lt;&#x3D; n ; i++ )
    &#123;
        int a;
        cin &gt;&gt; a;
        g[0][i] &#x3D; g[i][0] &#x3D; a;
    &#125;
    
    for(int i &#x3D; 1; i &lt;&#x3D; n ; i++ )
        for(int j &#x3D; 1 ; j &lt;&#x3D; n; j++ )
            cin &gt;&gt; g[i][j];
            
    int t &#x3D; prim();
    cout &lt;&lt; t &lt;&lt; endl;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1147/">北极通讯网络</a></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;cmath&gt;

#define x first
#define y second

using namespace std;
typedef pair&lt;int,int&gt; PII;
const int N &#x3D; 510 , M &#x3D; N * N &#x2F; 2;

int n,m,k;
PII q[N];
int p[N];
struct Edge&#123;
    int a, b;
    double w;
    bool operator &lt;(const Edge&amp; W) const &#123;
        return w &lt; W.w;
    &#125;
&#125;e[M];

double get_dist(PII a, PII b)
&#123;
    int dx &#x3D; a.x - b.x;
    int dy &#x3D; a.y - b.y;
    return sqrt(dx * dx + dy * dy);
&#125;

int find(int x)
&#123;
    if(p[x] !&#x3D; x) return p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    cin &gt;&gt; n &gt;&gt; k;
    for(int i &#x3D; 0 ; i &lt; n ; i++) cin &gt;&gt; q[i].x &gt;&gt; q[i].y;
    for(int i &#x3D; 0 ; i &lt; n ; i ++ )
        for(int j &#x3D; 0 ; j &lt; i ; j ++) 
            e[m ++ ] &#x3D; &#123;i , j , get_dist(q[i], q[j])&#125;;
            
    sort(e, e + m);
    for(int i &#x3D; 0 ; i &lt; n ; i ++ ) p[i] &#x3D; i;
    int cnt &#x3D; n;
    double res &#x3D; 0;
    for(int i &#x3D; 0 ; i &lt; m ; i ++ )
    &#123;
        if(cnt &lt;&#x3D; k ) break;
        int a &#x3D; find(e[i].a) , b &#x3D; find(e[i].b);
        double w &#x3D; e[i].w;
        
        if(a !&#x3D; b)
        &#123;
            p[a] &#x3D; b;
            cnt -- ;
            res &#x3D; w;
        &#125;
    &#125;
    
    printf(&quot;%.2lf\n&quot;, res);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/348/">走廊泼水节</a></p>
<p><img src="https://charminghacker-blog-pic.oss-cn-chengdu.aliyuncs.com/202305262311755.png"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;
const int N &#x3D; 6010;

struct Edge&#123;
    int a, b, w;
    bool operator &lt;(const Edge &amp;W) const &#123;
        return w &lt; W.w;
    &#125;
&#125;e[N];

int n;
int p[N];
int sz[N];

int find(int x)
&#123;
    if(p[x] !&#x3D; x) p[x] &#x3D; find(p[x]);
    return p[x];
&#125;

int main()
&#123;
    int T;
    cin &gt;&gt; T;
    while(T -- )
    &#123;
        cin &gt;&gt; n;
        for(int i &#x3D; 0 ; i &lt; n - 1 ; i ++ )
        &#123;
            int a, b, w;
            cin &gt;&gt; a &gt;&gt; b &gt;&gt; w;
            e[i] &#x3D; &#123;a, b, w&#125;;
        &#125;
        
        sort(e, e + n - 1);
        for(int i &#x3D; 1 ; i &lt;&#x3D; n ; i ++ ) p[i] &#x3D; i, sz[i] &#x3D; 1;
        
        int res &#x3D; 0;
        for(int i &#x3D; 0 ; i &lt; n - 1 ; i ++ )
        &#123;
            int a &#x3D; find(e[i].a), b &#x3D; find(e[i].b);
            int w &#x3D; e[i].w;
            if(a !&#x3D; b)
            &#123;
                res +&#x3D; (sz[a] * sz[b] - 1) * (w + 1);
                sz[b] +&#x3D; sz[a];
                p[a] &#x3D; b;
                
            &#125;
        &#125;
        
        cout &lt;&lt; res &lt;&lt; endl;
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/1150/">秘密的牛奶运输</a>（未做）</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;
typedef long long LL;
const int N &#x3D; 505, M &#x3D; 10005, L &#x3D; 10, INF &#x3D; 2e9;
int n, m, fa[N][L], fMax[N][L][2], f[N];
int dep[N];
LL res &#x3D; 0, ans &#x3D; 9e18;
bool st[M];
&#x2F;*
fMax[i][j][0 &#x2F; 1] 表示 i 这个点往上跳 2 ^ j 个点，这个范围内的 最大值 &#x2F; 最小值。
*&#x2F;
int head[N], numE &#x3D; 0;
struct Edge&#123;
    int next, from, to, dis;
&#125;e[M &lt;&lt; 1];
struct E&#123;
    int u, v, w;
    bool operator &lt; (const E &amp;x) const&#123;
        return w &lt; x.w;
    &#125;
&#125;g[M];
void inline addEdge(int from, int to, int dis)&#123;
    e[++numE].next &#x3D; head[from];
    e[numE].to &#x3D; to;
    e[numE].from &#x3D; from;
    e[numE].dis &#x3D; dis;
    head[from] &#x3D; numE;
&#125;

void dfs(int u, int last)&#123;
    for(int i &#x3D; 1; fa[fa[u][i - 1]][i - 1]; i++)&#123;
        fa[u][i] &#x3D; fa[fa[u][i - 1]][i - 1];
        if(fMax[u][i - 1][0] &#x3D;&#x3D; fMax[fa[u][i - 1]][i - 1][0])&#123;
            fMax[u][i][0] &#x3D; fMax[u][i - 1][0];
            fMax[u][i][1] &#x3D; max(fMax[u][i - 1][1], fMax[fa[u][i - 1]][i - 1][1]);
        &#125;else&#123;
            fMax[u][i][0] &#x3D; max(fMax[u][i - 1][0], fMax[fa[u][i - 1]][i - 1][0]);
            fMax[u][i][1] &#x3D; min(fMax[u][i - 1][0], fMax[fa[u][i - 1]][i - 1][0]);
        &#125;
    &#125;
    for(int i &#x3D; head[u]; i; i &#x3D; e[i].next)&#123;
        int v &#x3D; e[i].to;
        if(v &#x3D;&#x3D; last) continue;
        fa[v][0] &#x3D; u, fMax[v][0][0] &#x3D; e[i].dis;
        dep[v] &#x3D; dep[u] + 1, fMax[v][0][1] &#x3D; -INF;
        dfs(v, u);
    &#125;
&#125;
int find(int x)&#123;
    return x &#x3D;&#x3D; f[x] ? x : f[x] &#x3D; find(f[x]);
&#125;

void inline update(int v, int &amp;val1, int &amp;val2)&#123;
    if(v &gt; val1) val2 &#x3D; val1, val1 &#x3D; v;
    else if(v &gt; val2 &amp;&amp; v !&#x3D; val1) val2 &#x3D; v;
&#125;


void inline lca(int x, int y, int &amp;val1, int &amp;val2)&#123;
    if(dep[x] &lt; dep[y]) swap(x, y);
    for(int i &#x3D; L - 1; ~i; i--)
        if(dep[x] - (1 &lt;&lt; i) &gt;&#x3D; dep[y]) &#123;
            update(fMax[x][i][0], val1, val2);
            update(fMax[x][i][1], val1, val2);
            x &#x3D; fa[x][i];
        &#125;
    if(x &#x3D;&#x3D; y) return;
    for(int i &#x3D; L - 1; ~i; i--)&#123;
        if(fa[x][i] !&#x3D; fa[y][i])&#123;
            update(fMax[x][i][0], val1, val2);
            update(fMax[x][i][1], val1, val2);
            update(fMax[y][i][0], val1, val2);
            update(fMax[y][i][1], val1, val2);
            x &#x3D; fa[x][i], y &#x3D; fa[y][i];
        &#125;
    &#125;
    update(fMax[x][0][0], val1, val2);
    update(fMax[x][0][1], val1, val2);
    update(fMax[y][0][0], val1, val2);
    update(fMax[y][0][1], val1, val2);
&#125;

int main()&#123;
    scanf(&quot;%d%d&quot;, &amp;n, &amp;m);

    for(int i &#x3D; 1; i &lt;&#x3D; n; i++)
        f[i] &#x3D; i;

    for(int i &#x3D; 1; i &lt;&#x3D; m; i++)&#123;
        int u, v, w; scanf(&quot;%d%d%d&quot;, &amp;u, &amp;v, &amp;w);
        g[i] &#x3D; (E)&#123; u, v, w &#125;;
    &#125;
    sort(g + 1, g + 1 + m);
    for(int i &#x3D; 1; i &lt;&#x3D; m; i++)&#123;
        int u &#x3D; find(g[i].u), v &#x3D; find(g[i].v), w &#x3D; g[i].w;
        if(u !&#x3D; v)&#123;
            f[u] &#x3D; v, res +&#x3D; w, st[i] &#x3D; true;
            addEdge(g[i].u, g[i].v, w); addEdge(g[i].v, g[i].u, w);
        &#125;
    &#125;
    dfs(1, 0);
    for(int i &#x3D; 1; i &lt;&#x3D; m; i++)&#123;
        if(!st[i])&#123;
            int val1 &#x3D; -INF, val2 &#x3D; -INF;

            lca(g[i].u, g[i].v, val1, val2);
            if(val1 &#x3D;&#x3D; g[i].w)
                ans &#x3D; min(ans, res - val2 + g[i].w);
            else ans &#x3D; min(ans, res - val1 + g[i].w);
        &#125;
    &#125;
    printf(&quot;%lld\n&quot;, ans);
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">wck</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2023/041126447.html">http://example.com/2023/041126447.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">wck</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%9B%BE%E8%AE%BA/">
                                    <span class="chip bg-color">图论</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'yohIdjiNFr5gi9AMV8TPhv90-gzGzoHsz',
        appKey: 'dpdaXreArfn9sbA5A5hGBlUG',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'monsterid',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '留下你想说的话吧~',
        enableQQ: true,
        emojiCDN: '//i0.hdslb.com/bfs/emote/', 
        // 表情title和图片映射
        emojiMaps: {
        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
        "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
        "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
        "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
        "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
        "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
        "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
        "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
        "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
        "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
        "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
        "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
        "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
        "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
        "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
        "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
        "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
        "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
        "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
        "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
        "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
        "tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
        "tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
        "tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
        "tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
        "tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
        "tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
        "tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
        "tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
        "tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
        "tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
        "tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
        "tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
        "tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
        "tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
        "tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
        "tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
        "tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
        "tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
        "tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
        "tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
        "tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
        "tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
        "tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png",
        "tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
        "tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
        "tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
        "tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
        "tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
        "tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
        },
        requiredFields: ['nick','mail'],
    });
</script>

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/041141030.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/23.jpg" class="responsive-img" alt="算法（四）数学知识">
                        
                        <span class="card-title">算法（四）数学知识</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            y总算法基础课的第四章数学知识笔记，包括c++以及java版本的例题题解
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-04-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/" class="post-category">
                                    算法基础课
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86/">
                        <span class="chip bg-color">数学知识</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/041152485.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="算法（二）数据结构">
                        
                        <span class="card-title">算法（二）数据结构</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            y总算法基础课的第二章数据结构笔记，包括c++以及java版本的例题题解
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-04-11
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/" class="post-category">
                                    算法基础课
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="chip bg-color">数据结构</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2023</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">wck</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">397.1k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/rumor-sourse" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2560428298@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2560428298" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2560428298" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/7491101842/home" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/7491101842/home" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/chu-zi-hang-46-14" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/chu-zi-hang-46-14" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>





    <a href="https://space.bilibili.com/531340472" class="tooltipped" target="_blank" data-tooltip="在B站上关注我" " data-position="top" data-delay="50">
        <i class="fas fa-play-circle"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <!-- <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
        }
    </script> -->
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

 
</body>

</html>
